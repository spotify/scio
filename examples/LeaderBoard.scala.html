
          
          <style>/*! tooltips 0.1.0 - 20th Dec 2013 | https://github.com/darsain/tooltip */
.tooltip {
  position: absolute;
  padding: .8em 1em;
  top: 10px; /* Defines the spacing between tooltip and target position */
  max-width: 70vw;
  color: #fff;
  background: #3a3c47;
  border-radius: 2px;
  text-shadow: -1px -1px 0 rgba(0,0,0,.2);
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: none;
}

/* Arrow styles */
.tooltip:after {
  content: '';
  position: absolute;
  width: 10px;
  height: 10px;
  margin: -5px;
  background: inherit;
  -webkit-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}

.tooltip.top:after, .tooltip.top-left:after, .tooltip.top-right:after { bottom: 0; }
.tooltip.bottom:after, .tooltip.bottom-left:after, .tooltip.bottom-right:after { top: 0; }
.tooltip.top:after, .tooltip.bottom:after { left: 50%; }
.tooltip.top-left:after, .tooltip.bottom-left:after { right: 15px; }
.tooltip.top-right:after, .tooltip.bottom-right:after { left: 15px; }

.tooltip.left:after, .tooltip.left-top:after, .tooltip.left-bottom:after { right: 0; }
.tooltip.right:after, .tooltip.right-top:after, .tooltip.right-bottom:after { left: 0; }
.tooltip.left:after, .tooltip.right:after { top: 50%; }
.tooltip.left-top:after, .tooltip.right-top:after { bottom: 15px; }
.tooltip.left-bottom:after, .tooltip.right-bottom:after { top: 15px; }

/* Fade */
.tooltip.fade { opacity: 0; transition: opacity 200ms ease-out; }
.tooltip.fade.in { opacity: 1; transition-duration: 100ms; }

/* Slide */
.tooltip.slide {
  opacity: 0;
  transition: -webkit-transform 200ms ease-out;
  transition: transform 200ms ease-out;
  transition-property: -webkit-transform, opacity;
  transition-property: transform, opacity;
}
.tooltip.slide.top,
.tooltip.slide.top-left,
.tooltip.slide.top-right {
  -webkit-transform: translateY(15px);
  transform: translateY(15px);
}
.tooltip.slide.bottom,
.tooltip.slide.bottom-left,
.tooltip.slide.bottom-right {
  -webkit-transform: translateY(-15px);
  transform: translateY(-15px);
}
.tooltip.slide.left,
.tooltip.slide.left-top,
.tooltip.slide.left-bottom {
  -webkit-transform: translateX(15px);
  transform: translateX(15px);
}
.tooltip.slide.right,
.tooltip.slide.right-top,
.tooltip.slide.right-bottom {
  -webkit-transform: translateX(-15px);
  transform: translateX(-15px);
}
.tooltip.slide.in {
  opacity: 1;
  -webkit-transform: none;
  transform: none;
  transition-duration: 100ms;
}

/* Grow */
.tooltip.grow {
  -webkit-transform: scale(0);
  transform: scale(0);
  transition: -webkit-transform 200ms ease-out;
  transition: transform 200ms ease-out;
}
.tooltip.grow.top {
  -webkit-transform: translateY(60%) scale(0);
  transform: translateY(60%) scale(0);
}
.tooltip.grow.top-left {
  -webkit-transform: translateY(60%) translateX(40%) scale(0);
  transform: translateY(60%) translateX(40%) scale(0);
}
.tooltip.grow.top-right {
  -webkit-transform: translateY(60%) translateX(-40%) scale(0);
  transform: translateY(60%) translateX(-40%) scale(0);
}
.tooltip.grow.bottom {
  -webkit-transform: translateY(-60%) scale(0);
  transform: translateY(-60%) scale(0);
}
.tooltip.grow.bottom-left {
  -webkit-transform: translateY(-60%) translateX(40%) scale(0);
  transform: translateY(-60%) translateX(40%) scale(0);
}
.tooltip.grow.bottom-right {
  -webkit-transform: translateY(-60%) translateX(-40%) scale(0);
  transform: translateY(-60%) translateX(-40%) scale(0);
}
.tooltip.grow.left {
  -webkit-transform: translateX(53%) scale(0);
  transform: translateX(53%) scale(0);
}
.tooltip.grow.left-top {
  -webkit-transform: translateX(53%) translateY(40%) scale(0);
  transform: translateX(53%) translateY(40%) scale(0);
}
.tooltip.grow.left-bottom {
  -webkit-transform: translateX(53%) translateY(-40%) scale(0);
  transform: translateX(53%) translateY(-40%) scale(0);
}
.tooltip.grow.right {
  -webkit-transform: translateX(-53%) scale(0);
  transform: translateX(-53%) scale(0);
}
.tooltip.grow.right-top {
  -webkit-transform: translateX(-53%) translateY(40%) scale(0);
  transform: translateX(-53%) translateY(40%) scale(0);
}
.tooltip.grow.right-bottom {
  -webkit-transform: translateX(-53%) translateY(-40%) scale(0);
  transform: translateX(-53%) translateY(-40%) scale(0);
}
.tooltip.grow.in {
  -webkit-transform: none;
  transform: none;
  transition-duration: 100ms;
}

/* Types */
.tooltip.light { color: #3a3c47; background: #fff; text-shadow: none; }
.tooltip.success { background: #8dc572; }
.tooltip.warning { background: #ddc12e; }
.tooltip.error { background: #be6464; }</style>
          <style>body, html {
  margin: 0;
  padding: 0;
}

body {
  display: flex;
  flex-direction: column;
}

.tooltip {
  max-width: 60vw;
}

.tooltip > span {
  display: inline-block;
  white-space: nowrap;
  width: 100%;
  font-family: monospace;
  font-size: 13px;
  line-height: 1.8em;
  font-weight: 400;
  overflow: hidden;
  text-overflow: ellipsis;
}

section {
  display: flex;
  font-size: 16px;
  line-height: 24px;
}

a {
  cursor: pointer;
  border-bottom: 1px dotted #768a9c;
  text-decoration: none;
  color: inherit;
}

hr {
  border: none;
  border-bottom: 4px solid #efeff3;
  margin-top: 11px;
  margin-bottom: 46px;
}

.comment {
  font-family: 'Georgia', Serif;
  flex: 1;
  color: #191e21;
  padding: 0 15px 0 50px;
}

.comment h1 {
  font-size: 24px;
  margin-top: 2em;
  margin-bottom: 1.5em;
  line-height: 1.4em;
}

.comment p {
  margin-top: 0;
  margin-bottom: 1.5em;
}

.comment code {
  font-family: monospace;
  font-size: 85%;
  color: #30404f;
  background: #f5f5ff;
  padding: 1px 0;
  border-radius: 1px;
}

.comment a code {
  border-bottom: 1px dotted #768a9c;
}

.code {
  font-family: monospace;
  font-size: 85%;
  white-space: pre;
  width: 60vw;
  margin-left: 25px;
  color: #768a9c;
  background: #f5f5ff;
  padding: 0 25px;
  border-left: 1px solid #E5E5EC;
  box-sizing: border-box;
  overflow: auto;
}

.identifier {
  color: #30404f;
}

.keyword {
  color: #0995c3;
  font-weight: 600;
}

.number {
  color: #d25100;
}

.string {
  color: #21ab70;
}

#footer {
  height: 10px;
  flex: 1;
}
</style>
          
          <section id="header">
            <div class="comment"><h1>Calculate leaderboard for game (highest team scores, highest user scores)</h1></div>
            <div class="code"></div>
          </section>
          
              <section class="">
                <div class="comment "><p>Usage:</p></p></div>
                <div class="code empty">&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p><code>sbt runMain &quot;com.spotify.scio.examples.complete.game.LeaderBoard
--project=[PROJECT] --runner=DataflowRunner --zone=[ZONE]
--teamWindowDuration=60
--allowedLateness=120
--topic=[PUBSUB_TOPIC_NAME]
--output=bq://[PROJECT]/[DATASET]/mobile_game&quot;</code></p></p></div>
                <div class="code ">
<span class="keyword">package</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/index.html" data-tooltip="<span>com.spotify.scio.examples</span>">examples</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/index.html" data-tooltip="<span>com.spotify.scio.examples.complete</span>">complete</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/index.html" data-tooltip="<span>com.spotify.scio.examples.complete.game</span>">game</a></span>

<span class="keyword">import</span> <span class="identifier">java</span>.<span class="identifier">util</span>.<span class="identifier">TimeZone</span>

<span class="keyword">import</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>._
<span class="keyword">import</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/bigquery/index.html" data-tooltip="<span>com.spotify.scio.bigquery</span>">bigquery</a></span>._
<span class="keyword">import</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/index.html" data-tooltip="<span>com.spotify.scio.examples</span>">examples</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/index.html" data-tooltip="<span>com.spotify.scio.examples.complete</span>">complete</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/index.html" data-tooltip="<span>com.spotify.scio.examples.complete.game</span>">game</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore</span>">UserScore</a></span>.<span class="identifier">GameActionInfo</span>
<span class="keyword">import</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/streaming/index.html" data-tooltip="<span>com.spotify.scio.streaming</span>">streaming</a></span>._
<span class="keyword">import</span> <span class="identifier">com</span>.<span class="identifier">spotify</span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/index.html" data-tooltip="<span>com.spotify.scio</span>">scio</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/index.html" data-tooltip="<span>com.spotify.scio.values</span>">values</a></span>.{<span class="identifier">SCollection</span>, <span class="identifier">WindowOptions</span>}
<span class="keyword">import</span> <span class="identifier">org</span>.<span class="identifier">apache</span>.<span class="identifier">beam</span>.<span class="identifier">examples</span>.<span class="identifier">common</span>.{<span class="identifier">ExampleOptions</span>, <span class="identifier">ExampleUtils</span>}
<span class="keyword">import</span> <span class="identifier">org</span>.<span class="identifier">apache</span>.<span class="identifier">beam</span>.<span class="identifier">sdk</span>.<span class="identifier">options</span>.<span class="identifier">StreamingOptions</span>
<span class="keyword">import</span> <span class="identifier">org</span>.<span class="identifier">apache</span>.<span class="identifier">beam</span>.<span class="identifier">sdk</span>.<span class="identifier">transforms</span>.<span class="identifier">windowing</span>._
<span class="keyword">import</span> <span class="identifier">org</span>.<span class="identifier">joda</span>.<span class="identifier">time</span>.<span class="identifier">format</span>.<span class="identifier">DateTimeFormat</span>
<span class="keyword">import</span> <span class="identifier">org</span>.<span class="identifier">joda</span>.<span class="identifier">time</span>.{<span class="identifier">DateTimeZone</span>, <span class="identifier">Duration</span>, <span class="identifier">Instant</span>}

<span class="keyword">object</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard</span>">LeaderBoard</a></span> {
&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>The schemas for the BigQuery tables to write output to are defined as annotated case classes</p></p></div>
                <div class="code ">  @<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$$TeamScoreSums$.html#apply(team:String@com.spotify.scio.bigquery.types.BigQueryTag,total_score:Int@com.spotify.scio.bigquery.types.BigQueryTag,window_start:String@com.spotify.scio.bigquery.types.BigQueryTag,processing_time:String@com.spotify.scio.bigquery.types.BigQueryTag,timing:String@com.spotify.scio.bigquery.types.BigQueryTag):com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums.apply(team: String @com.spotify.scio.bigquery.types.BigQueryTag, total_score: Int @com.spotify.scio.bigquery.types.BigQueryTag, window_start: String @com.spotify.scio.bigquery.types.BigQueryTag, processing_time: String @com.spotify.scio.bigquery.types.BigQueryTag, timing: String @com.spotify.scio.bigquery.types.BigQueryTag): com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums</span>">BigQueryType</a></span>.<span class="identifier">toTable</span>
  <span class="keyword">case class</span> <span class="identifier">TeamScoreSums</span>(<span class="identifier">team</span>: <span class="identifier">String</span>, <span class="identifier">total_score</span>: <span class="identifier">Int</span>,
                           <span class="identifier">window_start</span>: <span class="identifier">String</span>, <span class="identifier">processing_time</span>: <span class="identifier">String</span>, <span class="identifier">timing</span>: <span class="identifier">String</span>)

  @<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$$UserScoreSums$.html#apply(user:String@com.spotify.scio.bigquery.types.BigQueryTag,total_score:Int@com.spotify.scio.bigquery.types.BigQueryTag,processing_time:String@com.spotify.scio.bigquery.types.BigQueryTag):com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums.apply(user: String @com.spotify.scio.bigquery.types.BigQueryTag, total_score: Int @com.spotify.scio.bigquery.types.BigQueryTag, processing_time: String @com.spotify.scio.bigquery.types.BigQueryTag): com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums</span>">BigQueryType</a></span>.<span class="identifier">toTable</span>
  <span class="keyword">case class</span> <span class="identifier">UserScoreSums</span>(<span class="identifier">user</span>: <span class="identifier">String</span>, <span class="identifier">total_score</span>: <span class="identifier">Int</span>, <span class="identifier">processing_time</span>: <span class="identifier">String</span>)
&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>scalastyle:off method.length</p></p></div>
                <div class="code ">  <span class="keyword">def</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#main(cmdlineArgs:Array[String]):Unit" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.main(cmdlineArgs: Array[String]): Unit</span>">main</a></span>(<span class="identifier">cmdlineArgs</span>: <span class="identifier">Array</span>[<span class="identifier">String</span>]): <span class="identifier">Unit</span> = {&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Create <code>ScioContext</code> and <code>Args</code></p></p></div>
                <div class="code ">    <span class="keyword">val</span> (<span class="identifier">opts</span>, <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html" data-tooltip="<span>com.spotify.scio.Args</span>">args</a></span>) = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext$.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">ScioContext</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext$.html#parseArguments[T<:org.apache.beam.sdk.options.PipelineOptions](cmdlineArgs:Array[String],withValidation:Boolean)(implicitevidence$1:scala.reflect.ClassTag[T]):(T,com.spotify.scio.Args)" data-tooltip="<span>com.spotify.scio.ScioContext.parseArguments[T <: org.apache.beam.sdk.options.PipelineOptions](cmdlineArgs: Array[String], withValidation: Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])(T, com.spotify.scio.Args)</span>">parseArguments</a></span>[<span class="identifier">ExampleOptions</span>](<span class="identifier">cmdlineArgs</span>)
    <span class="keyword">val</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">sc</a></span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext$.html#apply(options:org.apache.beam.sdk.options.PipelineOptions):com.spotify.scio.ScioContext" data-tooltip="<span>com.spotify.scio.ScioContext.apply(options: org.apache.beam.sdk.options.PipelineOptions): com.spotify.scio.ScioContext</span>">ScioContext</a></span>(<span class="identifier">opts</span>)
    <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">sc</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#optionsAs[T<:org.apache.beam.sdk.options.PipelineOptions](implicitevidence$2:scala.reflect.ClassTag[T]):T" data-tooltip="<span>com.spotify.scio.ScioContext.optionsAs[T <: org.apache.beam.sdk.options.PipelineOptions](implicit evidence$2: scala.reflect.ClassTag[T]): T</span>">optionsAs</a></span>[<span class="identifier">StreamingOptions</span>].<span class="identifier">setStreaming</span>(true)
    <span class="keyword">val</span> <span class="identifier">exampleUtils</span> = <span class="keyword">new</span> <span class="identifier">ExampleUtils</span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">sc</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#options:org.apache.beam.sdk.options.PipelineOptions" data-tooltip="<span>com.spotify.scio.ScioContext.options: org.apache.beam.sdk.options.PipelineOptions</span>">options</a></span>)
&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Date formatter for full timestamp</p></p></div>
                <div class="code ">    <span class="keyword">def</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#main(cmdlineArgs:Array[String]):Unit#fmt:org.joda.time.format.DateTimeFormatter" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.fmt: org.joda.time.format.DateTimeFormatter</span>">fmt</a></span> = <span class="identifier">DateTimeFormat</span>.<span class="identifier">forPattern</span>(<span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span>)
      .<span class="identifier">withZone</span>(<span class="identifier">DateTimeZone</span>.<span class="identifier">forTimeZone</span>(<span class="identifier">TimeZone</span>.<span class="identifier">getTimeZone</span>(<span class="string">"PST"</span>)))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Duration in minutes over which to calculate team scores, defaults to 1 hour</p></p></div>
                <div class="code ">    <span class="keyword">val</span> <span class="identifier">teamWindowDuration</span> = <span class="identifier">Duration</span>.<span class="identifier">standardMinutes</span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html" data-tooltip="<span>com.spotify.scio.Args</span>">args</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html#int(key:String,default:Int):Int" data-tooltip="<span>com.spotify.scio.Args.int(key: String, default: Int): Int</span>">int</a></span>(<span class="string">"teamWindowDuration"</span>, <span class="number">60</span>))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Data that comes in from our streaming pipeline after this duration isn&#39;t considered in our
processing. Measured in minutes, defaults to 2 hours</p></p></div>
                <div class="code ">    <span class="keyword">val</span> <span class="identifier">allowedLateness</span> = <span class="identifier">Duration</span>.<span class="identifier">standardMinutes</span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html" data-tooltip="<span>com.spotify.scio.Args</span>">args</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html#int(key:String,default:Int):Int" data-tooltip="<span>com.spotify.scio.Args.int(key: String, default: Int): Int</span>">int</a></span>(<span class="string">"allowedLateness"</span>, <span class="number">120</span>))
&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Read in streaming data from PubSub and parse each row as <code>GameActionInfo</code> events</p></p></div>
                <div class="code ">    <span class="keyword">val</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">gameEvents</a></span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">sc</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#pubsubTopic[T](topic:String,idAttribute:String,timestampAttribute:String)(implicitevidence$18:scala.reflect.ClassTag[T]):com.spotify.scio.values.SCollection[T]" data-tooltip="<span>com.spotify.scio.ScioContext.pubsubTopic[T](topic: String, idAttribute: String, timestampAttribute: String)(implicit evidence$18: scala.reflect.ClassTag[T]): com.spotify.scio.values.SCollection[T]</span>">pubsubTopic</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html#apply(key:String):String" data-tooltip="<span>com.spotify.scio.Args.apply(key: String): String</span>">args</a></span>(<span class="string">"topic"</span>), <span class="identifier">timestampAttribute</span> = <span class="string">"timestamp_ms"</span>)
      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#flatMap[U](f:T=>TraversableOnce[U])(implicitevidence$17:scala.reflect.ClassTag[U]):com.spotify.scio.values.SCollection[U]" data-tooltip="<span>com.spotify.scio.values.SCollection.flatMap[U](f: T => TraversableOnce[U])(implicit evidence$17: scala.reflect.ClassTag[U]): com.spotify.scio.values.SCollection[U]</span>">flatMap</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore</span>">UserScore</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$.html#parseEvent(line:String):Option[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.parseEvent(line: String): Option[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">parseEvent</a></span>)

    <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#calculateTeamScores(infos:com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo],teamWindowDuration:org.joda.time.Duration,allowedLateness:org.joda.time.Duration):com.spotify.scio.values.SCollection[(String,Int)]" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.calculateTeamScores(infos: com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo], teamWindowDuration: org.joda.time.Duration, allowedLateness: org.joda.time.Duration)com.spotify.scio.values.SCollection[(String, Int)]</span>">calculateTeamScores</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">gameEvents</a></span>, <span class="identifier">teamWindowDuration</span>, <span class="identifier">allowedLateness</span>)&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Add windowing information to team score results by converting to <code>WindowedSCollection</code></p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#toWindowed:com.spotify.scio.values.WindowedSCollection[T]" data-tooltip="<span>com.spotify.scio.values.SCollection.toWindowed: com.spotify.scio.values.WindowedSCollection[T]</span>">toWindowed</a></span>
      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedSCollection.html#map[U](f:com.spotify.scio.values.WindowedValue[T]=>com.spotify.scio.values.WindowedValue[U])(implicitevidence$4:scala.reflect.ClassTag[U]):com.spotify.scio.values.WindowedSCollection[U]" data-tooltip="<span>com.spotify.scio.values.WindowedSCollection.map[U](f: com.spotify.scio.values.WindowedValue[T] => com.spotify.scio.values.WindowedValue[U])(implicit evidence$4: scala.reflect.ClassTag[U]): com.spotify.scio.values.WindowedSCollection[U]</span>">map</a></span> { <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span> =>&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Convert from score tuple to TeamScoreSums object with both tuple and windowing info</p></p></div>
                <div class="code ">        <span class="keyword">val</span> <span class="identifier">start</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#main(cmdlineArgs:Array[String]):Unit#fmt:org.joda.time.format.DateTimeFormatter" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.fmt: org.joda.time.format.DateTimeFormatter</span>">fmt</a></span>.<span class="identifier">print</span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html#window:org.apache.beam.sdk.transforms.windowing.BoundedWindow" data-tooltip="<span>com.spotify.scio.values.WindowedValue.window: org.apache.beam.sdk.transforms.windowing.BoundedWindow</span>">window</a></span>.<span class="identifier">asInstanceOf</span>[<span class="identifier">IntervalWindow</span>].<span class="identifier">start</span>())
        <span class="keyword">val</span> <span class="identifier">now</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#main(cmdlineArgs:Array[String]):Unit#fmt:org.joda.time.format.DateTimeFormatter" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.fmt: org.joda.time.format.DateTimeFormatter</span>">fmt</a></span>.<span class="identifier">print</span>(<span class="identifier">Instant</span>.<span class="identifier">now</span>())
        <span class="keyword">val</span> <span class="identifier">timing</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html#pane:org.apache.beam.sdk.transforms.windowing.PaneInfo" data-tooltip="<span>com.spotify.scio.values.WindowedValue.pane: org.apache.beam.sdk.transforms.windowing.PaneInfo</span>">pane</a></span>.<span class="identifier">getTiming</span>.<span class="identifier">toString</span>
        <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html#copy[T](value:T,timestamp:org.joda.time.Instant,window:org.apache.beam.sdk.transforms.windowing.BoundedWindow,pane:org.apache.beam.sdk.transforms.windowing.PaneInfo):com.spotify.scio.values.WindowedValue[T]" data-tooltip="<span>com.spotify.scio.values.WindowedValue.copy[T](value: T, timestamp: org.joda.time.Instant, window: org.apache.beam.sdk.transforms.windowing.BoundedWindow, pane: org.apache.beam.sdk.transforms.windowing.PaneInfo): com.spotify.scio.values.WindowedValue[T]</span>">copy</a></span>(<span class="identifier">value</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$$TeamScoreSums$.html#apply(team:String@com.spotify.scio.bigquery.types.BigQueryTag,total_score:Int@com.spotify.scio.bigquery.types.BigQueryTag,window_start:String@com.spotify.scio.bigquery.types.BigQueryTag,processing_time:String@com.spotify.scio.bigquery.types.BigQueryTag,timing:String@com.spotify.scio.bigquery.types.BigQueryTag):com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums.apply(team: String @com.spotify.scio.bigquery.types.BigQueryTag, total_score: Int @com.spotify.scio.bigquery.types.BigQueryTag, window_start: String @com.spotify.scio.bigquery.types.BigQueryTag, processing_time: String @com.spotify.scio.bigquery.types.BigQueryTag, timing: String @com.spotify.scio.bigquery.types.BigQueryTag): com.spotify.scio.examples.complete.game.LeaderBoard.TeamScoreSums</span>">TeamScoreSums</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html#value:T" data-tooltip="<span>com.spotify.scio.values.WindowedValue.value: T</span>">value</a></span>.<span class="identifier">_1</span>, <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html" data-tooltip="<span>com.spotify.scio.values.WindowedValue[(String, Int)]</span>">wv</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedValue.html#value:T" data-tooltip="<span>com.spotify.scio.values.WindowedValue.value: T</span>">value</a></span>.<span class="identifier">_2</span>, <span class="identifier">start</span>, <span class="identifier">now</span>, <span class="identifier">timing</span>))
      }&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Done with windowing information, convert back to regular <code>SCollection</code></p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowedSCollection.html#toSCollection:com.spotify.scio.values.SCollection[T]" data-tooltip="<span>com.spotify.scio.values.WindowedSCollection.toSCollection: com.spotify.scio.values.SCollection[T]</span>">toSCollection</a></span>&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Save to the BigQuery table defined by &quot;output&quot; in the arguments passed in + &quot;_team&quot; suffix</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#saveAsTypedBigQuery(tableSpec:String,writeDisposition:org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition,createDisposition:org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition)(implicitct:scala.reflect.ClassTag[T],implicittt:reflect.runtime.universe.TypeTag[T],implicitev:T<:<com.spotify.scio.bigquery.types.BigQueryType.HasAnnotation):scala.concurrent.Future[com.spotify.scio.io.Tap[T]]" data-tooltip="<span>com.spotify.scio.values.SCollection.saveAsTypedBigQuery(tableSpec: String, writeDisposition: org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition, createDisposition: org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition)(implicit ct: scala.reflect.ClassTag[T], implicit tt: reflect.runtime.universe.TypeTag[T], implicit ev: T <:< com.spotify.scio.bigquery.types.BigQueryType.HasAnnotation): scala.concurrent.Future[com.spotify.scio.io.Tap[T]]</span>">saveAsTypedBigQuery</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html#apply(key:String):String" data-tooltip="<span>com.spotify.scio.Args.apply(key: String): String</span>">args</a></span>(<span class="string">"output"</span>) <span class="identifier">+</span> <span class="string">"_team"</span>)

    <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">gameEvents</a></span>&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Use a global window for unbounded data, which updates calculation every 10 minutes,
starting 10 minutes after the first event arrives.
Recalculates immediately when late data arrives, according to these rules:
- Accumulates fired panes (rather than discarding), which means subsequent calculations
use all data, not just data collected after the last calculation was done.
- Accepts late entries (and recalculates based on them) only if they arrive within the
allowedLateness duration.
For more information on these options, see the Beam docs:
https://beam.apache.org/documentation/programming-guide/#triggers</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#withGlobalWindow(options:com.spotify.scio.values.WindowOptions):com.spotify.scio.values.SCollection[T]" data-tooltip="<span>com.spotify.scio.values.SCollection.withGlobalWindow(options: com.spotify.scio.values.WindowOptions): com.spotify.scio.values.SCollection[T]</span>">withGlobalWindow</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowOptions$.html#apply(trigger:org.apache.beam.sdk.transforms.windowing.Trigger,accumulationMode:org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode,allowedLateness:org.joda.time.Duration,closingBehavior:org.apache.beam.sdk.transforms.windowing.Window.ClosingBehavior,timestampCombiner:org.apache.beam.sdk.transforms.windowing.TimestampCombiner):com.spotify.scio.values.WindowOptions" data-tooltip="<span>com.spotify.scio.values.WindowOptions.apply(trigger: org.apache.beam.sdk.transforms.windowing.Trigger, accumulationMode: org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode, allowedLateness: org.joda.time.Duration, closingBehavior: org.apache.beam.sdk.transforms.windowing.Window.ClosingBehavior, timestampCombiner: org.apache.beam.sdk.transforms.windowing.TimestampCombiner): com.spotify.scio.values.WindowOptions</span>">WindowOptions</a></span>(
        <span class="identifier">trigger</span> = <span class="identifier">Repeatedly</span>.<span class="identifier">forever</span>(<span class="identifier">AfterProcessingTime</span>.<span class="identifier">pastFirstElementInPane</span>()
          .<span class="identifier">plusDelayOf</span>(<span class="identifier">Duration</span>.<span class="identifier">standardMinutes</span>(<span class="number">10</span>))),
        <span class="identifier">accumulationMode</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/streaming/package$.html#ACCUMULATING_FIRED_PANES:org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode" data-tooltip="<span>com.spotify.scio.streaming.ACCUMULATING_FIRED_PANES: org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode</span>">ACCUMULATING_FIRED_PANES</a></span>,
        <span class="identifier">allowedLateness</span> = <span class="identifier">allowedLateness</span>)
      )&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Change each event into a tuple of: user, and that user&#39;s score</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#map[U](f:T=>U)(implicitevidence$21:scala.reflect.ClassTag[U]):com.spotify.scio.values.SCollection[U]" data-tooltip="<span>com.spotify.scio.values.SCollection.map[U](f: T => U)(implicit evidence$21: scala.reflect.ClassTag[U]): com.spotify.scio.values.SCollection[U]</span>">map</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span> => (<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html#user:String" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo.user: String</span>">user</a></span>, <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html#score:Int" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo.score: Int</span>">score</a></span>))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Sum the scores by user</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/PairSCollectionFunctions.html#sumByKey(implicitsg:com.twitter.algebird.Semigroup[V]):com.spotify.scio.values.SCollection[(K,V)]" data-tooltip="<span>com.spotify.scio.values.PairSCollectionFunctions.sumByKey(implicit sg: com.twitter.algebird.Semigroup[V])com.spotify.scio.values.SCollection[(K, V)]</span>">sumByKey</a></span>&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Map summed results from tuples into <code>UserScoreSums</code> case class, so we can save to BQ</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#map[U](f:T=>U)(implicitevidence$21:scala.reflect.ClassTag[U]):com.spotify.scio.values.SCollection[U]" data-tooltip="<span>com.spotify.scio.values.SCollection.map[U](f: T => U)(implicit evidence$21: scala.reflect.ClassTag[U]): com.spotify.scio.values.SCollection[U]</span>">map</a></span>(<span class="identifier">kv</span> => <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$$UserScoreSums$.html#apply(user:String@com.spotify.scio.bigquery.types.BigQueryTag,total_score:Int@com.spotify.scio.bigquery.types.BigQueryTag,processing_time:String@com.spotify.scio.bigquery.types.BigQueryTag):com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums.apply(user: String @com.spotify.scio.bigquery.types.BigQueryTag, total_score: Int @com.spotify.scio.bigquery.types.BigQueryTag, processing_time: String @com.spotify.scio.bigquery.types.BigQueryTag): com.spotify.scio.examples.complete.game.LeaderBoard.UserScoreSums</span>">UserScoreSums</a></span>(<span class="identifier">kv</span>.<span class="identifier">_1</span>, <span class="identifier">kv</span>.<span class="identifier">_2</span>, <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#main(cmdlineArgs:Array[String]):Unit#fmt:org.joda.time.format.DateTimeFormatter" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.fmt: org.joda.time.format.DateTimeFormatter</span>">fmt</a></span>.<span class="identifier">print</span>(<span class="identifier">Instant</span>.<span class="identifier">now</span>())))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Save to the BigQuery table defined by &quot;output&quot; in the arguments passed in + &quot;_user&quot; suffix</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#saveAsTypedBigQuery(tableSpec:String,writeDisposition:org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition,createDisposition:org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition)(implicitct:scala.reflect.ClassTag[T],implicittt:reflect.runtime.universe.TypeTag[T],implicitev:T<:<com.spotify.scio.bigquery.types.BigQueryType.HasAnnotation):scala.concurrent.Future[com.spotify.scio.io.Tap[T]]" data-tooltip="<span>com.spotify.scio.values.SCollection.saveAsTypedBigQuery(tableSpec: String, writeDisposition: org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition, createDisposition: org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition)(implicit ct: scala.reflect.ClassTag[T], implicit tt: reflect.runtime.universe.TypeTag[T], implicit ev: T <:< com.spotify.scio.bigquery.types.BigQueryType.HasAnnotation): scala.concurrent.Future[com.spotify.scio.io.Tap[T]]</span>">saveAsTypedBigQuery</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/Args.html#apply(key:String):String" data-tooltip="<span>com.spotify.scio.Args.apply(key: String): String</span>">args</a></span>(<span class="string">"output"</span>) <span class="identifier">+</span> <span class="string">"_user"</span>)
&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Close context and execute the pipeline</p></p></div>
                <div class="code ">    <span class="keyword">val</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioResult.html" data-tooltip="<span>com.spotify.scio.ScioResult</span>">result</a></span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html" data-tooltip="<span>com.spotify.scio.ScioContext</span>">sc</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#close():com.spotify.scio.ScioResult" data-tooltip="<span>com.spotify.scio.ScioContext.close(): com.spotify.scio.ScioResult</span>">close</a></span>()&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Wait to finish processing before exiting when streaming pipeline is canceled during shutdown</p></p></div>
                <div class="code ">    <span class="identifier">exampleUtils</span>.<span class="identifier">waitToFinish</span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioResult.html" data-tooltip="<span>com.spotify.scio.ScioResult</span>">result</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/ScioResult.html#internal:org.apache.beam.sdk.PipelineResult" data-tooltip="<span>com.spotify.scio.ScioResult.internal: org.apache.beam.sdk.PipelineResult</span>">internal</a></span>)
  }&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>scalastyle:on method.length</p></p></div>
                <div class="code ">
  <span class="keyword">def</span> <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/LeaderBoard$.html#calculateTeamScores(infos:com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo],teamWindowDuration:org.joda.time.Duration,allowedLateness:org.joda.time.Duration):com.spotify.scio.values.SCollection[(String,Int)]" data-tooltip="<span>com.spotify.scio.examples.complete.game.LeaderBoard.calculateTeamScores(infos: com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo], teamWindowDuration: org.joda.time.Duration, allowedLateness: org.joda.time.Duration)com.spotify.scio.values.SCollection[(String, Int)]</span>">calculateTeamScores</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">infos</a></span>: <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection</span>">SCollection</a></span>[<span class="identifier">GameActionInfo</span>],
                          <span class="identifier">teamWindowDuration</span>: <span class="identifier">Duration</span>,
                          <span class="identifier">allowedLateness</span>: <span class="identifier">Duration</span>): <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection</span>">SCollection</a></span>[(<span class="identifier">String</span>, <span class="identifier">Int</span>)] =
    <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html" data-tooltip="<span>com.spotify.scio.values.SCollection[com.spotify.scio.examples.complete.game.UserScore.GameActionInfo]</span>">infos</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#withFixedWindows(duration:org.joda.time.Duration,offset:org.joda.time.Duration,options:com.spotify.scio.values.WindowOptions):com.spotify.scio.values.SCollection[T]" data-tooltip="<span>com.spotify.scio.values.SCollection.withFixedWindows(duration: org.joda.time.Duration, offset: org.joda.time.Duration, options: com.spotify.scio.values.WindowOptions): com.spotify.scio.values.SCollection[T]</span>">withFixedWindows</a></span>(&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Using a fixed window, calculate every time the window ends.
Also calculate an early/&quot;speculative&quot; result from partial data, 5 minutes after the first
element in our window is processed (withEarlyFirings).
If late data arrives, 10 minutes after the late data arrives, recalculate according to:
- Accumulates fired panes (rather than discarding), which means subsequent calculations
use all data, not just data collected after the last calculation was done.
- Accepts late entries (and recalculates based on them) only if they arrive within the
allowedLateness duration.
For more information on these options, see the Beam
<a href="https://beam.apache.org/documentation/programming-guide/#composite-triggers">doc</a>
(subsection 8.5.2, &quot;Composition with AfterWatermark&quot;, is especially relevant)</p></p></div>
                <div class="code ">      <span class="identifier">teamWindowDuration</span>,
      <span class="identifier">options</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/WindowOptions$.html#apply(trigger:org.apache.beam.sdk.transforms.windowing.Trigger,accumulationMode:org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode,allowedLateness:org.joda.time.Duration,closingBehavior:org.apache.beam.sdk.transforms.windowing.Window.ClosingBehavior,timestampCombiner:org.apache.beam.sdk.transforms.windowing.TimestampCombiner):com.spotify.scio.values.WindowOptions" data-tooltip="<span>com.spotify.scio.values.WindowOptions.apply(trigger: org.apache.beam.sdk.transforms.windowing.Trigger, accumulationMode: org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode, allowedLateness: org.joda.time.Duration, closingBehavior: org.apache.beam.sdk.transforms.windowing.Window.ClosingBehavior, timestampCombiner: org.apache.beam.sdk.transforms.windowing.TimestampCombiner): com.spotify.scio.values.WindowOptions</span>">WindowOptions</a></span>(
        <span class="identifier">trigger</span> = <span class="identifier">AfterWatermark</span>.<span class="identifier">pastEndOfWindow</span>()
          .<span class="identifier">withEarlyFirings</span>(<span class="identifier">AfterProcessingTime</span>.<span class="identifier">pastFirstElementInPane</span>()
            .<span class="identifier">plusDelayOf</span>(<span class="identifier">Duration</span>.<span class="identifier">standardMinutes</span>(<span class="number">5</span>)))
          .<span class="identifier">withLateFirings</span>(<span class="identifier">AfterProcessingTime</span>.<span class="identifier">pastFirstElementInPane</span>()
            .<span class="identifier">plusDelayOf</span>(<span class="identifier">Duration</span>.<span class="identifier">standardMinutes</span>(<span class="number">10</span>))),
        <span class="identifier">accumulationMode</span> = <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/streaming/package$.html#ACCUMULATING_FIRED_PANES:org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode" data-tooltip="<span>com.spotify.scio.streaming.ACCUMULATING_FIRED_PANES: org.apache.beam.sdk.values.WindowingStrategy.AccumulationMode</span>">ACCUMULATING_FIRED_PANES</a></span>,
        <span class="identifier">allowedLateness</span> = <span class="identifier">allowedLateness</span>))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Change each event into a tuple of: team user was on, and that user&#39;s score</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/SCollection.html#map[U](f:T=>U)(implicitevidence$21:scala.reflect.ClassTag[U]):com.spotify.scio.values.SCollection[U]" data-tooltip="<span>com.spotify.scio.values.SCollection.map[U](f: T => U)(implicit evidence$21: scala.reflect.ClassTag[U]): com.spotify.scio.values.SCollection[U]</span>">map</a></span>(<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span> => (<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html#team:String" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo.team: String</span>">team</a></span>, <span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo</span>">i</a></span>.<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/examples/complete/game/UserScore$$GameActionInfo.html#score:Int" data-tooltip="<span>com.spotify.scio.examples.complete.game.UserScore.GameActionInfo.score: Int</span>">score</a></span>))&nbsp;</div>
              </section>
            
              <section class="">
                <div class="comment "><p>Sum the scores across the defined window, using &quot;team&quot; as the key to sum by</p></p></div>
                <div class="code ">      .<span class="identifier"><a target="doc" href="https://spotify.github.io/scio/api/com/spotify/scio/values/PairSCollectionFunctions.html#sumByKey(implicitsg:com.twitter.algebird.Semigroup[V]):com.spotify.scio.values.SCollection[(K,V)]" data-tooltip="<span>com.spotify.scio.values.PairSCollectionFunctions.sumByKey(implicit sg: com.twitter.algebird.Semigroup[V])com.spotify.scio.values.SCollection[(K, V)]</span>">sumByKey</a></span>

}&nbsp;</div>
              </section>
            
          <section id="footer">
            <div class="comment"></div>
            <div class="code"></div>
          </section>
          
          <script>/*!
 * tooltips 0.1.0 - 20th Dec 2013
 * https://github.com/darsain/tooltip
 *
 * Licensed under the MIT license.
 * http://opensource.org/licenses/MIT
 */
;(function(){

/**
 * Require the given path.
 *
 * @param {String} path
 * @return {Object} exports
 * @api public
 */

function require(path, parent, orig) {
  var resolved = require.resolve(path);

  // lookup failed
  if (null == resolved) {
    orig = orig || path;
    parent = parent || 'root';
    var err = new Error('Failed to require "' + orig + '" from "' + parent + '"');
    err.path = orig;
    err.parent = parent;
    err.require = true;
    throw err;
  }

  var module = require.modules[resolved];

  // perform real require()
  // by invoking the module's
  // registered function
  if (!module._resolving && !module.exports) {
    var mod = {};
    mod.exports = {};
    mod.client = mod.component = true;
    module._resolving = true;
    module.call(this, mod.exports, require.relative(resolved), mod);
    delete module._resolving;
    module.exports = mod.exports;
  }

  return module.exports;
}

/**
 * Registered modules.
 */

require.modules = {};

/**
 * Registered aliases.
 */

require.aliases = {};

/**
 * Resolve `path`.
 *
 * Lookup:
 *
 *   - PATH/index.js
 *   - PATH.js
 *   - PATH
 *
 * @param {String} path
 * @return {String} path or null
 * @api private
 */

require.resolve = function(path) {
  if (path.charAt(0) === '/') path = path.slice(1);

  var paths = [
    path,
    path + '.js',
    path + '.json',
    path + '/index.js',
    path + '/index.json'
  ];

  for (var i = 0; i < paths.length; i++) {
    var path = paths[i];
    if (require.modules.hasOwnProperty(path)) return path;
    if (require.aliases.hasOwnProperty(path)) return require.aliases[path];
  }
};

/**
 * Normalize `path` relative to the current path.
 *
 * @param {String} curr
 * @param {String} path
 * @return {String}
 * @api private
 */

require.normalize = function(curr, path) {
  var segs = [];

  if ('.' != path.charAt(0)) return path;

  curr = curr.split('/');
  path = path.split('/');

  for (var i = 0; i < path.length; ++i) {
    if ('..' == path[i]) {
      curr.pop();
    } else if ('.' != path[i] && '' != path[i]) {
      segs.push(path[i]);
    }
  }

  return curr.concat(segs).join('/');
};

/**
 * Register module at `path` with callback `definition`.
 *
 * @param {String} path
 * @param {Function} definition
 * @api private
 */

require.register = function(path, definition) {
  require.modules[path] = definition;
};

/**
 * Alias a module definition.
 *
 * @param {String} from
 * @param {String} to
 * @api private
 */

require.alias = function(from, to) {
  if (!require.modules.hasOwnProperty(from)) {
    throw new Error('Failed to alias "' + from + '", it does not exist');
  }
  require.aliases[to] = from;
};

/**
 * Return a require function relative to the `parent` path.
 *
 * @param {String} parent
 * @return {Function}
 * @api private
 */

require.relative = function(parent) {
  var p = require.normalize(parent, '..');

  /**
   * lastIndexOf helper.
   */

  function lastIndexOf(arr, obj) {
    var i = arr.length;
    while (i--) {
      if (arr[i] === obj) return i;
    }
    return -1;
  }

  /**
   * The relative require() itself.
   */

  function localRequire(path) {
    var resolved = localRequire.resolve(path);
    return require(resolved, parent, path);
  }

  /**
   * Resolve relative to the parent.
   */

  localRequire.resolve = function(path) {
    var c = path.charAt(0);
    if ('/' == c) return path.slice(1);
    if ('.' == c) return require.normalize(p, path);

    // resolve deps by returning
    // the dep in the nearest "deps"
    // directory
    var segs = parent.split('/');
    var i = lastIndexOf(segs, 'deps') + 1;
    if (!i) i = 0;
    path = segs.slice(0, i + 1).join('/') + '/deps/' + path;
    return path;
  };

  /**
   * Check if module is defined at `path`.
   */

  localRequire.exists = function(path) {
    return require.modules.hasOwnProperty(localRequire.resolve(path));
  };

  return localRequire;
};
require.register("darsain-position/index.js", Function("exports, require, module",
"'use strict';\n\
\n\
/**\n\
 * Transport.\n\
 */\n\
module.exports = position;\n\
\n\
/**\n\
 * Globals.\n\
 */\n\
var win = window;\n\
var doc = win.document;\n\
var docEl = doc.documentElement;\n\
\n\
/**\n\
 * Poor man's shallow object extend.\n\
 *\n\
 * @param {Object} a\n\
 * @param {Object} b\n\
 *\n\
 * @return {Object}\n\
 */\n\
function extend(a, b) {\n\
\tfor (var key in b) {\n\
\t\ta[key] = b[key];\n\
\t}\n\
\treturn a;\n\
}\n\
\n\
/**\n\
 * Checks whether object is window.\n\
 *\n\
 * @param {Object} obj\n\
 *\n\
 * @return {Boolean}\n\
 */\n\
function isWin(obj) {\n\
\treturn obj && obj.setInterval != null;\n\
}\n\
\n\
/**\n\
 * Returns element's object with `left`, `top`, `bottom`, `right`, `width`, and `height`\n\
 * properties indicating the position and dimensions of element on a page.\n\
 *\n\
 * @param {Element} element\n\
 *\n\
 * @return {Object}\n\
 */\n\
function position(element) {\n\
\tvar winTop = win.pageYOffset || docEl.scrollTop;\n\
\tvar winLeft = win.pageXOffset || docEl.scrollLeft;\n\
\tvar box = { left: 0, right: 0, top: 0, bottom: 0, width: 0, height: 0 };\n\
\n\
\tif (isWin(element)) {\n\
\t\tbox.width = win.innerWidth || docEl.clientWidth;\n\
\t\tbox.height = win.innerHeight || docEl.clientHeight;\n\
\t} else if (docEl.contains(element) && element.getBoundingClientRect != null) {\n\
\t\textend(box, element.getBoundingClientRect());\n\
\t\t// width & height don't exist in <IE9\n\
\t\tbox.width = box.right - box.left;\n\
\t\tbox.height = box.bottom - box.top;\n\
\t} else {\n\
\t\treturn box;\n\
\t}\n\
\n\
\tbox.top = box.top + winTop - docEl.clientTop;\n\
\tbox.left = box.left + winLeft - docEl.clientLeft;\n\
\tbox.right = box.left + box.width;\n\
\tbox.bottom = box.top + box.height;\n\
\n\
\treturn box;\n\
}//@ sourceURL=darsain-position/index.js"
));
require.register("component-classes/index.js", Function("exports, require, module",
"/**\n\
 * Module dependencies.\n\
 */\n\
\n\
var index = require('indexof');\n\
\n\
/**\n\
 * Whitespace regexp.\n\
 */\n\
\n\
var re = /\\s+/;\n\
\n\
/**\n\
 * toString reference.\n\
 */\n\
\n\
var toString = Object.prototype.toString;\n\
\n\
/**\n\
 * Wrap `el` in a `ClassList`.\n\
 *\n\
 * @param {Element} el\n\
 * @return {ClassList}\n\
 * @api public\n\
 */\n\
\n\
module.exports = function(el){\n\
  return new ClassList(el);\n\
};\n\
\n\
/**\n\
 * Initialize a new ClassList for `el`.\n\
 *\n\
 * @param {Element} el\n\
 * @api private\n\
 */\n\
\n\
function ClassList(el) {\n\
  if (!el) throw new Error('A DOM element reference is required');\n\
  this.el = el;\n\
  this.list = el.classList;\n\
}\n\
\n\
/**\n\
 * Add class `name` if not already present.\n\
 *\n\
 * @param {String} name\n\
 * @return {ClassList}\n\
 * @api public\n\
 */\n\
\n\
ClassList.prototype.add = function(name){\n\
  // classList\n\
  if (this.list) {\n\
    this.list.add(name);\n\
    return this;\n\
  }\n\
\n\
  // fallback\n\
  var arr = this.array();\n\
  var i = index(arr, name);\n\
  if (!~i) arr.push(name);\n\
  this.el.className = arr.join(' ');\n\
  return this;\n\
};\n\
\n\
/**\n\
 * Remove class `name` when present, or\n\
 * pass a regular expression to remove\n\
 * any which match.\n\
 *\n\
 * @param {String|RegExp} name\n\
 * @return {ClassList}\n\
 * @api public\n\
 */\n\
\n\
ClassList.prototype.remove = function(name){\n\
  if ('[object RegExp]' == toString.call(name)) {\n\
    return this.removeMatching(name);\n\
  }\n\
\n\
  // classList\n\
  if (this.list) {\n\
    this.list.remove(name);\n\
    return this;\n\
  }\n\
\n\
  // fallback\n\
  var arr = this.array();\n\
  var i = index(arr, name);\n\
  if (~i) arr.splice(i, 1);\n\
  this.el.className = arr.join(' ');\n\
  return this;\n\
};\n\
\n\
/**\n\
 * Remove all classes matching `re`.\n\
 *\n\
 * @param {RegExp} re\n\
 * @return {ClassList}\n\
 * @api private\n\
 */\n\
\n\
ClassList.prototype.removeMatching = function(re){\n\
  var arr = this.array();\n\
  for (var i = 0; i < arr.length; i++) {\n\
    if (re.test(arr[i])) {\n\
      this.remove(arr[i]);\n\
    }\n\
  }\n\
  return this;\n\
};\n\
\n\
/**\n\
 * Toggle class `name`.\n\
 *\n\
 * @param {String} name\n\
 * @return {ClassList}\n\
 * @api public\n\
 */\n\
\n\
ClassList.prototype.toggle = function(name){\n\
  // classList\n\
  if (this.list) {\n\
    this.list.toggle(name);\n\
    return this;\n\
  }\n\
\n\
  // fallback\n\
  if (this.has(name)) {\n\
    this.remove(name);\n\
  } else {\n\
    this.add(name);\n\
  }\n\
  return this;\n\
};\n\
\n\
/**\n\
 * Return an array of classes.\n\
 *\n\
 * @return {Array}\n\
 * @api public\n\
 */\n\
\n\
ClassList.prototype.array = function(){\n\
  var str = this.el.className.replace(/^\\s+|\\s+$/g, '');\n\
  var arr = str.split(re);\n\
  if ('' === arr[0]) arr.shift();\n\
  return arr;\n\
};\n\
\n\
/**\n\
 * Check if class `name` is present.\n\
 *\n\
 * @param {String} name\n\
 * @return {ClassList}\n\
 * @api public\n\
 */\n\
\n\
ClassList.prototype.has =\n\
ClassList.prototype.contains = function(name){\n\
  return this.list\n\
    ? this.list.contains(name)\n\
    : !! ~index(this.array(), name);\n\
};\n\
//@ sourceURL=component-classes/index.js"
));
require.register("darsain-tooltip/index.js", Function("exports, require, module",
"'use strict';\n\
\n\
/**\n\
 * Dependencies.\n\
 */\n\
var evt = require('event');\n\
var classes = require('classes');\n\
var indexOf = require('indexof');\n\
var position = require('position');\n\
\n\
/**\n\
 * Globals.\n\
 */\n\
var win = window;\n\
var doc = win.document;\n\
var body = doc.body;\n\
var verticalPlaces = ['top', 'bottom'];\n\
\n\
/**\n\
 * Transport.\n\
 */\n\
module.exports = Tooltip;\n\
\n\
/**\n\
 * Prototypal inheritance.\n\
 *\n\
 * @param {Object} o\n\
 *\n\
 * @return {Object}\n\
 */\n\
var objectCreate = Object.create || (function () {\n\
\tfunction F() {}\n\
\treturn function (o) {\n\
\t\tF.prototype = o;\n\
\t\treturn new F();\n\
\t};\n\
})();\n\
\n\
/**\n\
 * Poor man's shallow object extend.\n\
 *\n\
 * @param {Object} a\n\
 * @param {Object} b\n\
 *\n\
 * @return {Object}\n\
 */\n\
function extend(a, b) {\n\
\tfor (var key in b) {\n\
\t\ta[key] = b[key];\n\
\t}\n\
\treturn a;\n\
}\n\
\n\
/**\n\
 * Parse integer from strings like '-50px'.\n\
 *\n\
 * @param {Mixed} value\n\
 *\n\
 * @return {Integer}\n\
 */\n\
function parsePx(value) {\n\
\treturn 0 | Math.round(String(value).replace(/[^\\-0-9.]/g, ''));\n\
}\n\
\n\
/**\n\
 * Get computed style of element.\n\
 *\n\
 * @param {Element} element\n\
 *\n\
 * @type {String}\n\
 */\n\
var style = win.getComputedStyle ? function style(element, name) {\n\
\treturn win.getComputedStyle(element, null)[name];\n\
} : function style(element, name) {\n\
\treturn element.currentStyle[name];\n\
};\n\
\n\
/**\n\
 * Returns transition duration of element in ms.\n\
 *\n\
 * @param {Element} element\n\
 *\n\
 * @return {Int}\n\
 */\n\
function transitionDuration(element) {\n\
\tvar duration = String(style(element, transitionDuration.propName));\n\
\tvar match = duration.match(/([0-9.]+)([ms]{1,2})/);\n\
\tif (match) {\n\
\t\tduration = Number(match[1]);\n\
\t\tif (match[2] === 's') {\n\
\t\t\tduration *= 1000;\n\
\t\t}\n\
\t}\n\
\treturn 0|duration;\n\
}\n\
transitionDuration.propName = (function () {\n\
\tvar element = doc.createElement('div');\n\
\tvar names = ['transitionDuration', 'webkitTransitionDuration'];\n\
\tvar value = '1s';\n\
\tfor (var i = 0; i < names.length; i++) {\n\
\t\telement.style[names[i]] = value;\n\
\t\tif (element.style[names[i]] === value) {\n\
\t\t\treturn names[i];\n\
\t\t}\n\
\t}\n\
}());\n\
\n\
/**\n\
 * Tooltip construnctor.\n\
 *\n\
 * @param {String|Element} content\n\
 * @param {Object}         options\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
function Tooltip(content, options) {\n\
\tif (!(this instanceof Tooltip)) {\n\
\t\treturn new Tooltip(content, options);\n\
\t}\n\
\tthis.hidden = 1;\n\
\tthis.options = extend(objectCreate(Tooltip.defaults), options);\n\
\tthis._createElement();\n\
\tthis.content(content);\n\
}\n\
\n\
/**\n\
 * Creates a tooltip element.\n\
 *\n\
 * @return {Void}\n\
 */\n\
Tooltip.prototype._createElement = function () {\n\
\tthis.element = doc.createElement('div');\n\
\tthis.classes = classes(this.element);\n\
\tthis.classes.add(this.options.baseClass);\n\
\tvar propName;\n\
\tfor (var i = 0; i < Tooltip.classTypes.length; i++) {\n\
\t\tpropName = Tooltip.classTypes[i] + 'Class';\n\
\t\tif (this.options[propName]) {\n\
\t\t\tthis.classes.add(this.options[propName]);\n\
\t\t}\n\
\t}\n\
};\n\
\n\
/**\n\
 * Changes tooltip's type class type.\n\
 *\n\
 * @param {String} name\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.type = function (name) {\n\
\treturn this.changeClassType('type', name);\n\
};\n\
\n\
/**\n\
 * Changes tooltip's effect class type.\n\
 *\n\
 * @param {String} name\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.effect = function (name) {\n\
\treturn this.changeClassType('effect', name);\n\
};\n\
\n\
/**\n\
 * Changes class type.\n\
 *\n\
 * @param {String} propName\n\
 * @param {String} newClass\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.changeClassType = function (propName, newClass) {\n\
\tpropName += 'Class';\n\
\tif (this.options[propName]) {\n\
\t\tthis.classes.remove(this.options[propName]);\n\
\t}\n\
\tthis.options[propName] = newClass;\n\
\tif (newClass) {\n\
\t\tthis.classes.add(newClass);\n\
\t}\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Updates tooltip's dimensions.\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.updateSize = function () {\n\
\tif (this.hidden) {\n\
\t\tthis.element.style.visibility = 'hidden';\n\
\t\tbody.appendChild(this.element);\n\
\t}\n\
\tthis.width = this.element.offsetWidth;\n\
\tthis.height = this.element.offsetHeight;\n\
\tif (this.spacing == null) {\n\
\t\tthis.spacing = this.options.spacing != null ? this.options.spacing : parsePx(style(this.element, 'top'));\n\
\t}\n\
\tif (this.hidden) {\n\
\t\tbody.removeChild(this.element);\n\
\t\tthis.element.style.visibility = '';\n\
\t} else {\n\
\t\tthis.position();\n\
\t}\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Change tooltip content.\n\
 *\n\
 * When tooltip is visible, its size is automatically\n\
 * synced and tooltip correctly repositioned.\n\
 *\n\
 * @param {String|Element} content\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.content = function (content) {\n\
\tif (typeof content === 'object') {\n\
\t\tthis.element.innerHTML = '';\n\
\t\tthis.element.appendChild(content);\n\
\t} else {\n\
\t\tthis.element.innerHTML = content;\n\
\t}\n\
\tthis.updateSize();\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Pick new place tooltip should be displayed at.\n\
 *\n\
 * When the tooltip is visible, it is automatically positioned there.\n\
 *\n\
 * @param {String} place\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.place = function (place) {\n\
\tthis.options.place = place;\n\
\tif (!this.hidden) {\n\
\t\tthis.position();\n\
\t}\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Attach tooltip to an element.\n\
 *\n\
 * @param {Element} element\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.attach = function (element) {\n\
\tthis.attachedTo = element;\n\
\tif (!this.hidden) {\n\
\t\tthis.position();\n\
\t}\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Detach tooltip from element.\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.detach = function () {\n\
\tthis.hide();\n\
\tthis.attachedTo = null;\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Pick the most reasonable place for target position.\n\
 *\n\
 * @param {Object} target\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype._pickPlace = function (target) {\n\
\tif (!this.options.auto) {\n\
\t\treturn this.options.place;\n\
\t}\n\
\tvar winPos = position(win);\n\
\tvar place = this.options.place.split('-');\n\
\tvar spacing = this.spacing;\n\
\n\
\tif (~indexOf(verticalPlaces, place[0])) {\n\
\t\tif (target.top - this.height - spacing <= winPos.top) {\n\
\t\t\tplace[0] = 'bottom';\n\
\t\t} else if (target.bottom + this.height + spacing >= winPos.bottom) {\n\
\t\t\tplace[0] = 'top';\n\
\t\t}\n\
\t\tswitch (place[1]) {\n\
\t\t\tcase 'left':\n\
\t\t\t\tif (target.right - this.width <= winPos.left) {\n\
\t\t\t\t\tplace[1] = 'right';\n\
\t\t\t\t}\n\
\t\t\t\tbreak;\n\
\t\t\tcase 'right':\n\
\t\t\t\tif (target.left + this.width >= winPos.right) {\n\
\t\t\t\t\tplace[1] = 'left';\n\
\t\t\t\t}\n\
\t\t\t\tbreak;\n\
\t\t\tdefault:\n\
\t\t\t\tif (target.left + target.width / 2 + this.width / 2 >= winPos.right) {\n\
\t\t\t\t\tplace[1] = 'left';\n\
\t\t\t\t} else if (target.right - target.width / 2 - this.width / 2 <= winPos.left) {\n\
\t\t\t\t\tplace[1] = 'right';\n\
\t\t\t\t}\n\
\t\t}\n\
\t} else {\n\
\t\tif (target.left - this.width - spacing <= winPos.left) {\n\
\t\t\tplace[0] = 'right';\n\
\t\t} else if (target.right + this.width + spacing >= winPos.right) {\n\
\t\t\tplace[0] = 'left';\n\
\t\t}\n\
\t\tswitch (place[1]) {\n\
\t\t\tcase 'top':\n\
\t\t\t\tif (target.bottom - this.height <= winPos.top) {\n\
\t\t\t\t\tplace[1] = 'bottom';\n\
\t\t\t\t}\n\
\t\t\t\tbreak;\n\
\t\t\tcase 'bottom':\n\
\t\t\t\tif (target.top + this.height >= winPos.bottom) {\n\
\t\t\t\t\tplace[1] = 'top';\n\
\t\t\t\t}\n\
\t\t\t\tbreak;\n\
\t\t\tdefault:\n\
\t\t\t\tif (target.top + target.height / 2 + this.height / 2 >= winPos.bottom) {\n\
\t\t\t\t\tplace[1] = 'top';\n\
\t\t\t\t} else if (target.bottom - target.height / 2 - this.height / 2 <= winPos.top) {\n\
\t\t\t\t\tplace[1] = 'bottom';\n\
\t\t\t\t}\n\
\t\t}\n\
\t}\n\
\n\
\treturn place.join('-');\n\
};\n\
\n\
/**\n\
 * Position the element to an element or a specific coordinates.\n\
 *\n\
 * @param {Integer|Element} x\n\
 * @param {Integer}         y\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.position = function (x, y) {\n\
\tif (this.attachedTo) {\n\
\t\tx = this.attachedTo;\n\
\t}\n\
\tif (x == null && this._p) {\n\
\t\tx = this._p[0];\n\
\t\ty = this._p[1];\n\
\t} else {\n\
\t\tthis._p = arguments;\n\
\t}\n\
\tvar target = typeof x === 'number' ? {\n\
\t\tleft: 0|x,\n\
\t\tright: 0|x,\n\
\t\ttop: 0|y,\n\
\t\tbottom: 0|y,\n\
\t\twidth: 0,\n\
\t\theight: 0\n\
\t} : position(x);\n\
\tvar spacing = this.spacing;\n\
\tvar newPlace = this._pickPlace(target);\n\
\n\
\t// Add/Change place class when necessary\n\
\tif (newPlace !== this.curPlace) {\n\
\t\tif (this.curPlace) {\n\
\t\t\tthis.classes.remove(this.curPlace);\n\
\t\t}\n\
\t\tthis.classes.add(newPlace);\n\
\t\tthis.curPlace = newPlace;\n\
\t}\n\
\n\
\t// Position the tip\n\
\tvar top, left;\n\
\tswitch (this.curPlace) {\n\
\t\tcase 'top':\n\
\t\t\ttop = target.top - this.height - spacing;\n\
\t\t\tleft = target.left + target.width / 2 - this.width / 2;\n\
\t\t\tbreak;\n\
\t\tcase 'top-left':\n\
\t\t\ttop = target.top - this.height - spacing;\n\
\t\t\tleft = target.right - this.width;\n\
\t\t\tbreak;\n\
\t\tcase 'top-right':\n\
\t\t\ttop = target.top - this.height - spacing;\n\
\t\t\tleft = target.left;\n\
\t\t\tbreak;\n\
\n\
\t\tcase 'bottom':\n\
\t\t\ttop = target.bottom + spacing;\n\
\t\t\tleft = target.left + target.width / 2 - this.width / 2;\n\
\t\t\tbreak;\n\
\t\tcase 'bottom-left':\n\
\t\t\ttop = target.bottom + spacing;\n\
\t\t\tleft = target.right - this.width;\n\
\t\t\tbreak;\n\
\t\tcase 'bottom-right':\n\
\t\t\ttop = target.bottom + spacing;\n\
\t\t\tleft = target.left;\n\
\t\t\tbreak;\n\
\n\
\t\tcase 'left':\n\
\t\t\ttop = target.top + target.height / 2 - this.height / 2;\n\
\t\t\tleft = target.left - this.width - spacing;\n\
\t\t\tbreak;\n\
\t\tcase 'left-top':\n\
\t\t\ttop = target.bottom - this.height;\n\
\t\t\tleft = target.left - this.width - spacing;\n\
\t\t\tbreak;\n\
\t\tcase 'left-bottom':\n\
\t\t\ttop = target.top;\n\
\t\t\tleft = target.left - this.width - spacing;\n\
\t\t\tbreak;\n\
\n\
\t\tcase 'right':\n\
\t\t\ttop = target.top + target.height / 2 - this.height / 2;\n\
\t\t\tleft = target.right + spacing;\n\
\t\t\tbreak;\n\
\t\tcase 'right-top':\n\
\t\t\ttop = target.bottom - this.height;\n\
\t\t\tleft = target.right + spacing;\n\
\t\t\tbreak;\n\
\t\tcase 'right-bottom':\n\
\t\t\ttop = target.top;\n\
\t\t\tleft = target.right + spacing;\n\
\t\t\tbreak;\n\
\t}\n\
\n\
\t// Set tip position & class\n\
\tthis.element.style.top = Math.round(top) + 'px';\n\
\tthis.element.style.left = Math.round(left) + 'px';\n\
\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Show the tooltip.\n\
 *\n\
 * @param {Integer|Element} x\n\
 * @param {Integer}         y\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.show = function (x, y) {\n\
\tx = this.attachedTo ? this.attachedTo : x;\n\
\n\
\t// Clear potential ongoing animation\n\
\tclearTimeout(this.aIndex);\n\
\n\
\t// Position the element when requested\n\
\tif (x != null) {\n\
\t\tthis.position(x, y);\n\
\t}\n\
\n\
\t// Stop here if tip is already visible\n\
\tif (this.hidden) {\n\
\t\tthis.hidden = 0;\n\
\t\tbody.appendChild(this.element);\n\
\t}\n\
\n\
\t// Make tooltip aware of window resize\n\
\tif (this.attachedTo) {\n\
\t\tthis._aware();\n\
\t}\n\
\n\
\t// Trigger layout and kick in the transition\n\
\tif (this.options.inClass) {\n\
\t\tif (this.options.effectClass) {\n\
\t\t\tvoid this.element.clientHeight;\n\
\t\t}\n\
\t\tthis.classes.add(this.options.inClass);\n\
\t}\n\
\n\
\treturn this;\n\
};\n\
\n\
/**\n\
 * Hide the tooltip.\n\
 *\n\
 * @return {Tooltip}\n\
 */\n\
Tooltip.prototype.hide = function () {\n\
\tif (this.hidden) {\n\
\t\treturn;\n\
\t}\n\
\n\
\tvar self = this;\n\
\tvar duration = 0;\n\
\n\
\t// Remove .in class and calculate transition duration if any\n\
\tif (this.options.inClass) {\n\
\t\tthis.classes.remove(this.options.inClass);\n\
\t\tif (this.options.effectClass) {\n\
\t\t\tduration = transitionDuration(this.element);\n\
\t\t}\n\
\t}\n\
\n\
\t// Remove tip from window resize awareness\n\
\tif (this.attachedTo) {\n\
\t\tthis._unaware();\n\
\t}\n\
\n\
\t// Remove the tip from the DOM when transition is done\n\
\tclearTimeout(this.aIndex);\n\
\tthis.aIndex = setTimeout(function () {\n\
\t\tself.aIndex = 0;\n\
\t\tbody.removeChild(self.element);\n\
\t\tself.hidden = 1;\n\
\t}, duration);\n\
\n\
\treturn this;\n\
};\n\
\n\
Tooltip.prototype.toggle = function (x, y) {\n\
\treturn this[this.hidden ? 'show' : 'hide'](x, y);\n\
};\n\
\n\
Tooltip.prototype.destroy = function () {\n\
\tclearTimeout(this.aIndex);\n\
\tthis._unaware();\n\
\tif (!this.hidden) {\n\
\t\tbody.removeChild(this.element);\n\
\t}\n\
\tthis.element = this.options = null;\n\
};\n\
\n\
/**\n\
 * Make the tip window resize aware.\n\
 *\n\
 * @return {Void}\n\
 */\n\
Tooltip.prototype._aware = function () {\n\
\tvar index = indexOf(Tooltip.winAware, this);\n\
\tif (!~index) {\n\
\t\tTooltip.winAware.push(this);\n\
\t}\n\
};\n\
\n\
/**\n\
 * Remove the window resize awareness.\n\
 *\n\
 * @return {Void}\n\
 */\n\
Tooltip.prototype._unaware = function () {\n\
\tvar index = indexOf(Tooltip.winAware, this);\n\
\tif (~index) {\n\
\t\tTooltip.winAware.splice(index, 1);\n\
\t}\n\
};\n\
\n\
/**\n\
 * Handles repositioning of tooltips on window resize.\n\
 *\n\
 * @return {Void}\n\
 */\n\
Tooltip.reposition = (function () {\n\
\tvar rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (fn) {\n\
\t\treturn setTimeout(fn, 17);\n\
\t};\n\
\tvar rIndex;\n\
\n\
\tfunction requestReposition() {\n\
\t\tif (rIndex || !Tooltip.winAware.length) {\n\
\t\t\treturn;\n\
\t\t}\n\
\t\trIndex = rAF(reposition, 17);\n\
\t}\n\
\n\
\tfunction reposition() {\n\
\t\trIndex = 0;\n\
\t\tvar tip;\n\
\t\tfor (var i = 0, l = Tooltip.winAware.length; i < l; i++) {\n\
\t\t\ttip = Tooltip.winAware[i];\n\
\t\t\ttip.position();\n\
\t\t}\n\
\t}\n\
\n\
\treturn requestReposition;\n\
}());\n\
Tooltip.winAware = [];\n\
\n\
// Bind winAware repositioning to window resize event\n\
evt.bind(window, 'resize', Tooltip.reposition);\n\
evt.bind(window, 'scroll', Tooltip.reposition);\n\
\n\
/**\n\
 * Array with dynamic class types.\n\
 *\n\
 * @type {Array}\n\
 */\n\
Tooltip.classTypes = ['type', 'effect'];\n\
\n\
/**\n\
 * Default options for Tooltip constructor.\n\
 *\n\
 * @type {Object}\n\
 */\n\
Tooltip.defaults = {\n\
\tbaseClass:   'tooltip', // Base tooltip class name.\n\
\ttypeClass:   null,      // Type tooltip class name.\n\
\teffectClass: null,      // Effect tooltip class name.\n\
\tinClass:     'in',      // Class used to transition stuff in.\n\
\tplace:       'top',     // Default place.\n\
\tspacing:     null,      // Gap between target and tooltip.\n\
\tauto:        0          // Whether to automatically adjust place to fit into window.\n\
};//@ sourceURL=darsain-tooltip/index.js"
));
require.register("darsain-event/index.js", Function("exports, require, module",
"'use strict';\n\
\n\
/**\n\
 * Bind `el` event `type` to `fn`.\n\
 *\n\
 * @param {Element}  el\n\
 * @param {String}   type\n\
 * @param {Function} fn\n\
 * @param {Boolean}  capture\n\
 *\n\
 * @return {Function}\n\
 */\n\
exports.bind = window.addEventListener ? function (el, type, fn, capture) {\n\
\tel.addEventListener(type, fn, capture || false);\n\
\treturn fn;\n\
} : function (el, type, fn) {\n\
\tvar fnid = type + fn;\n\
\tel[fnid] = el[fnid] || function () {\n\
\t\tvar event = window.event;\n\
\t\tevent.target = event.srcElement;\n\
\t\tevent.preventDefault = function () {\n\
\t\t\tevent.returnValue = false;\n\
\t\t};\n\
\t\tevent.stopPropagation = function () {\n\
\t\t\tevent.cancelBubble = true;\n\
\t\t};\n\
\t\tfn.call(el, event);\n\
\t};\n\
\tel.attachEvent('on' + type, el[fnid]);\n\
\treturn fn;\n\
};\n\
\n\
/**\n\
 * Unbind `el` event `type`'s callback `fn`.\n\
 *\n\
 * @param {Element}  el\n\
 * @param {String}   type\n\
 * @param {Function} fn\n\
 * @param {Boolean}  capture\n\
 *\n\
 * @return {Function}\n\
 */\n\
exports.unbind = window.removeEventListener ? function (el, type, fn, capture) {\n\
\tel.removeEventListener(type, fn, capture || false);\n\
\treturn fn;\n\
} : function (el, type, fn) {\n\
\tvar fnid = type + fn;\n\
\tel.detachEvent('on' + type, el[fnid]);\n\
\ttry {\n\
\t\tdelete el[fnid];\n\
\t} catch (err) {\n\
\t\t// can't delete window object properties\n\
\t\tel[fnid] = undefined;\n\
\t}\n\
\treturn fn;\n\
};//@ sourceURL=darsain-event/index.js"
));
require.register("component-indexof/index.js", Function("exports, require, module",
"module.exports = function(arr, obj){\n\
  if (arr.indexOf) return arr.indexOf(obj);\n\
  for (var i = 0; i < arr.length; ++i) {\n\
    if (arr[i] === obj) return i;\n\
  }\n\
  return -1;\n\
};//@ sourceURL=component-indexof/index.js"
));
require.register("code42day-dataset/index.js", Function("exports, require, module",
"module.exports=dataset;\n\
\n\
/*global document*/\n\
\n\
\n\
// replace namesLikeThis with names-like-this\n\
function toDashed(name) {\n\
  return name.replace(/([A-Z])/g, function(u) {\n\
    return \"-\" + u.toLowerCase();\n\
  });\n\
}\n\
\n\
var fn;\n\
\n\
if (document.head.dataset) {\n\
  fn = {\n\
    set: function(node, attr, value) {\n\
      node.dataset[attr] = value;\n\
    },\n\
    get: function(node, attr) {\n\
      return node.dataset[attr];\n\
    }\n\
  };\n\
} else {\n\
  fn = {\n\
    set: function(node, attr, value) {\n\
      node.setAttribute('data-' + toDashed(attr), value);\n\
    },\n\
    get: function(node, attr) {\n\
      return node.getAttribute('data-' + toDashed(attr));\n\
    }\n\
  };\n\
}\n\
\n\
function dataset(node, attr, value) {\n\
  var self = {\n\
    set: set,\n\
    get: get\n\
  };\n\
\n\
  function set(attr, value) {\n\
    fn.set(node, attr, value);\n\
    return self;\n\
  }\n\
\n\
  function get(attr) {\n\
    return fn.get(node, attr);\n\
  }\n\
\n\
  if (arguments.length === 3) {\n\
    return set(attr, value);\n\
  }\n\
  if (arguments.length == 2) {\n\
    return get(attr);\n\
  }\n\
\n\
  return self;\n\
}//@ sourceURL=code42day-dataset/index.js"
));
require.register("tooltips/index.js", Function("exports, require, module",
"'use strict';\n\
\n\
/**\n\
 * Dependencies.\n\
 */\n\
var evt = require('event');\n\
var indexOf = require('indexof');\n\
var Tooltip = require('tooltip');\n\
var dataset = require('dataset');\n\
\n\
/**\n\
 * Transport.\n\
 */\n\
module.exports = Tooltips;\n\
\n\
/**\n\
 * Globals.\n\
 */\n\
var MObserver = window.MutationObserver || window.WebkitMutationObserver;\n\
\n\
/**\n\
 * Prototypal inheritance.\n\
 *\n\
 * @param {Object} o\n\
 *\n\
 * @return {Object}\n\
 */\n\
var objectCreate = Object.create || (function () {\n\
\tfunction F() {}\n\
\treturn function (o) {\n\
\t\tF.prototype = o;\n\
\t\treturn new F();\n\
\t};\n\
})();\n\
\n\
/**\n\
 * Poor man's shallow object extend.\n\
 *\n\
 * @param {Object} a\n\
 * @param {Object} b\n\
 *\n\
 * @return {Object}\n\
 */\n\
function extend(a, b) {\n\
\tfor (var key in b) {\n\
\t\ta[key] = b[key];\n\
\t}\n\
\treturn a;\n\
}\n\
\n\
/**\n\
 * Capitalize the first letter of a string.\n\
 *\n\
 * @param {String} string\n\
 *\n\
 * @return {String}\n\
 */\n\
function ucFirst(string) {\n\
\treturn string.charAt(0).toUpperCase() + string.slice(1);\n\
}\n\
\n\
/**\n\
 * Tooltips constructor.\n\
 *\n\
 * @param {Element} container\n\
 * @param {Object}  options\n\
 *\n\
 * @return {Tooltips}\n\
 */\n\
function Tooltips(container, options) {\n\
\tif (!(this instanceof Tooltips)) {\n\
\t\treturn new Tooltips(container, options);\n\
\t}\n\
\n\
\tvar self = this;\n\
\tvar observer, TID;\n\
\n\
\t/**\n\
\t * Show tooltip attached to an element.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.show = function (element) {\n\
\t\treturn callTooltipMethod(element, 'show');\n\
\t};\n\
\n\
\t/**\n\
\t * Hide tooltip attached to an element.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.hide = function (element) {\n\
\t\treturn callTooltipMethod(element, 'hide');\n\
\t};\n\
\n\
\t/**\n\
\t * Toggle tooltip attached to an element.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.toggle = function (element) {\n\
\t\treturn callTooltipMethod(element, 'toggle');\n\
\t};\n\
\n\
\t/**\n\
\t * Retrieve tooltip attached to an element and call it's method.\n\
\t *\n\
\t * @param {Element} element\n\
\t * @param {String}  method\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tfunction callTooltipMethod(element, method) {\n\
\t\tvar tip = self.get(element);\n\
\t\tif (tip) {\n\
\t\t\ttip[method]();\n\
\t\t}\n\
\t\treturn self;\n\
\t}\n\
\n\
\t/**\n\
\t * Return a tooltip attached to an element. Tooltip is created if it doesn't exist yet.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Tooltip}\n\
\t */\n\
\tself.get = function (element) {\n\
\t\tvar tip = !!element && (element[TID] || createTip(element));\n\
\t\tif (tip && !element[TID]) {\n\
\t\t\telement[TID] = tip;\n\
\t\t}\n\
\t\treturn tip;\n\
\t};\n\
\n\
\t/**\n\
\t * Add element(s) to Tooltips instance.\n\
\t *\n\
\t * @param {[type]} element Can be element, or container containing elements to be added.\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.add = function (element) {\n\
\t\tif (!element || element.nodeType !== 1) {\n\
\t\t\treturn self;\n\
\t\t}\n\
\t\tif (dataset(element).get(options.key)) {\n\
\t\t\tbindElement(element);\n\
\t\t} else if (element.children) {\n\
\t\t\tbindElements(element.querySelectorAll(self.selector));\n\
\t\t}\n\
\t\treturn self;\n\
\t};\n\
\n\
\t/**\n\
\t * Remove element(s) from Tooltips instance.\n\
\t *\n\
\t * @param {Element} element Can be element, or container containing elements to be removed.\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.remove = function (element) {\n\
\t\tif (!element || element.nodeType !== 1) {\n\
\t\t\treturn self;\n\
\t\t}\n\
\t\tif (dataset(element).get(options.key)) {\n\
\t\t\tunbindElement(element);\n\
\t\t} else if (element.children) {\n\
\t\t\tunbindElements(element.querySelectorAll(self.selector));\n\
\t\t}\n\
\t\treturn self;\n\
\t};\n\
\n\
\t/**\n\
\t * Reload Tooltips instance.\n\
\t *\n\
\t * Unbinds current tooltipped elements, than selects the\n\
\t * data-key elements from container and binds them again.\n\
\t *\n\
\t * @return {Tooltips}\n\
\t */\n\
\tself.reload = function () {\n\
\t\t// Unbind old elements\n\
\t\tunbindElements(self.elements);\n\
\t\t// Bind new elements\n\
\t\tbindElements(self.container.querySelectorAll(self.selector));\n\
\t\treturn self;\n\
\t};\n\
\n\
\t/**\n\
\t * Destroy Tooltips instance.\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tself.destroy = function () {\n\
\t\tunbindElements(this.elements);\n\
\t\tif (observer) {\n\
\t\t\tobserver.disconnect();\n\
\t\t}\n\
\t\tthis.container = this.elements = this.options = observer = null;\n\
\t};\n\
\n\
\t/**\n\
\t * Create a tip from element data attributes.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Tooltip}\n\
\t */\n\
\tfunction createTip(element) {\n\
\t\tvar data = dataset(element);\n\
\t\tvar content = data.get(options.key);\n\
\t\tif (!content) {\n\
\t\t\treturn false;\n\
\t\t}\n\
\t\tvar tipOptions = objectCreate(options.tooltip);\n\
\t\tvar keyData;\n\
\t\tfor (var key in Tooltip.defaults) {\n\
\t\t\tkeyData = data.get(options.key + ucFirst(key.replace(/Class$/, '')));\n\
\t\t\tif (!keyData) {\n\
\t\t\t\tcontinue;\n\
\t\t\t}\n\
\t\t\ttipOptions[key] = keyData;\n\
\t\t}\n\
\t\treturn new Tooltip(content, tipOptions).attach(element);\n\
\t}\n\
\n\
\t/**\n\
\t * Bind Tooltips events to Array/NodeList of elements.\n\
\t *\n\
\t * @param {Array} elements\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction bindElements(elements) {\n\
\t\tfor (var i = 0, l = elements.length; i < l; i++) {\n\
\t\t\tbindElement(elements[i]);\n\
\t\t}\n\
\t}\n\
\n\
\t/**\n\
\t * Bind Tooltips events to element.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction bindElement(element) {\n\
\t\tif (element[TID] || ~indexOf(self.elements, element)) {\n\
\t\t\treturn;\n\
\t\t}\n\
\t\tevt.bind(element, options.showOn, eventHandler);\n\
\t\tevt.bind(element, options.hideOn, eventHandler);\n\
\t\tself.elements.push(element);\n\
\t}\n\
\n\
\t/**\n\
\t * Unbind Tooltips events from Array/NodeList of elements.\n\
\t *\n\
\t * @param {Array} elements\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction unbindElements(elements) {\n\
\t\tif (self.elements === elements) {\n\
\t\t\telements = elements.slice();\n\
\t\t}\n\
\t\tfor (var i = 0, l = elements.length; i < l; i++) {\n\
\t\t\tunbindElement(elements[i]);\n\
\t\t}\n\
\t}\n\
\n\
\t/**\n\
\t * Unbind Tooltips events from element.\n\
\t *\n\
\t * @param {Element} element\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction unbindElement(element) {\n\
\t\tvar index = indexOf(self.elements, element);\n\
\t\tif (!~index) {\n\
\t\t\treturn;\n\
\t\t}\n\
\t\tif (element[TID]) {\n\
\t\t\telement[TID].destroy();\n\
\t\t\tdelete element[TID];\n\
\t\t}\n\
\t\tevt.unbind(element, options.showOn, eventHandler);\n\
\t\tevt.unbind(element, options.hideOn, eventHandler);\n\
\t\tself.elements.splice(index, 1);\n\
\t}\n\
\n\
\t/**\n\
\t * Tooltips events handler.\n\
\t *\n\
\t * @param {Event} event\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction eventHandler(event) {\n\
\t\t/*jshint validthis:true */\n\
\t\tif (options.showOn === options.hideOn) {\n\
\t\t\tself.toggle(this);\n\
\t\t} else {\n\
\t\t\tself[event.type === options.showOn ? 'show' : 'hide'](this);\n\
\t\t}\n\
\t}\n\
\n\
\t/**\n\
\t * Mutations handler.\n\
\t *\n\
\t * @param {Array} mutations\n\
\t *\n\
\t * @return {Void}\n\
\t */\n\
\tfunction mutationsHandler(mutations) {\n\
\t\tvar added, removed, i, l;\n\
\t\tfor (var m = 0, ml = mutations.length; m < ml; m++) {\n\
\t\t\tadded = mutations[m].addedNodes;\n\
\t\t\tremoved = mutations[m].removedNodes;\n\
\t\t\tfor (i = 0, l = added.length; i < l; i++) {\n\
\t\t\t\tself.add(added[i]);\n\
\t\t\t}\n\
\t\t\tfor (i = 0, l = removed.length; i < l; i++) {\n\
\t\t\t\tself.remove(removed[i]);\n\
\t\t\t}\n\
\t\t}\n\
\t}\n\
\n\
\t// Construct\n\
\t(function () {\n\
\t\tself.container = container;\n\
\t\tself.options = options = extend(objectCreate(Tooltips.defaults), options);\n\
\t\tself.ID = TID = options.key + Math.random().toString(36).slice(2);\n\
\t\tself.elements = [];\n\
\n\
\t\t// Create tips selector\n\
\t\tself.selector = '[data-' + options.key + ']';\n\
\n\
\t\t// Load tips\n\
\t\tself.reload();\n\
\n\
\t\t// Create mutations observer\n\
\t\tif (options.observe && MObserver) {\n\
\t\t\tobserver = new MObserver(mutationsHandler);\n\
\t\t\tobserver.observe(self.container, {\n\
\t\t\t\tchildList: true,\n\
\t\t\t\tsubtree: true\n\
\t\t\t});\n\
\t\t}\n\
\t}());\n\
}\n\
\n\
/**\n\
 * Expose Tooltip.\n\
 */\n\
Tooltips.Tooltip = Tooltip;\n\
\n\
/**\n\
 * Default Tooltips options.\n\
 *\n\
 * @type {Object}\n\
 */\n\
Tooltips.defaults = {\n\
\ttooltip:    {},          // Options for individual Tooltip instances.\n\
\tkey:       'tooltip',    // Tooltips data attribute key.\n\
\tshowOn:    'mouseenter', // Show tooltip event.\n\
\thideOn:    'mouseleave', // Hide tooltip event.\n\
\tobserve:   0             // Enable mutation observer (used only when supported).\n\
};//@ sourceURL=tooltips/index.js"
));










require.alias("darsain-tooltip/index.js", "tooltips/deps/tooltip/index.js");
require.alias("darsain-tooltip/index.js", "tooltip/index.js");
require.alias("darsain-event/index.js", "darsain-tooltip/deps/event/index.js");

require.alias("darsain-position/index.js", "darsain-tooltip/deps/position/index.js");

require.alias("component-classes/index.js", "darsain-tooltip/deps/classes/index.js");
require.alias("component-indexof/index.js", "component-classes/deps/indexof/index.js");

require.alias("component-indexof/index.js", "darsain-tooltip/deps/indexof/index.js");

require.alias("darsain-event/index.js", "tooltips/deps/event/index.js");
require.alias("darsain-event/index.js", "event/index.js");

require.alias("component-indexof/index.js", "tooltips/deps/indexof/index.js");
require.alias("component-indexof/index.js", "indexof/index.js");

require.alias("code42day-dataset/index.js", "tooltips/deps/dataset/index.js");
require.alias("code42day-dataset/index.js", "dataset/index.js");
if (typeof exports == "object") {
  module.exports = require("tooltips");
} else if (typeof define == "function" && define.amd) {
  define(function(){ return require("tooltips"); });
} else {
  this["Tooltips"] = require("tooltips");
}})();</script>
          <script>
            var tips = new Tooltips(document, {
              tooltip: {
                auto: true,
                place: 'top',
                effectClass: '_'
              },
              key: 'tooltip',
              showOn: 'mouseenter',
              hideOn: 'mouseleave'
            });
          </script>
        