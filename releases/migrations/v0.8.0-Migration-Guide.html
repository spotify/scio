<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Scio - Documentation">
<meta name="generator" content="Paradox, paradox-material-theme=0.7.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="Scio - Documentation">
<link rel="shortcut icon" href="../../images/favicon.ico">
<title>Scio v0.8.0 Â· Scio</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
data-md-color-primary="white"
data-md-color-accent="indigo"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../index.html" title="Scio" class="md-header-nav__button md-logo">
<img src="../../images/logo.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Scio
</span>
<span class="md-header-nav__topic">
Scio v0.8.0
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/spotify/scio"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
spotify/scio
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../../index.html" title="Scio" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<img src="../../images/logo.png" width="24" height="24">
</a>
<a href="../../index.html" title="Scio">
Scio
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/spotify/scio"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
spotify/scio
</div>
</a>

</div>
<ul>
  <li><a href="../../Getting-Started.html" class="page">Getting Started</a></li>
  <li><a href="../../Builtin.html" class="page">Built-in Functionality</a></li>
  <li><a href="../../Joins.html" class="page">Joins</a></li>
  <li><a href="../../SideInputs.html" class="page">Side Inputs</a></li>
  <li><a href="../../io/index.html" class="page">IO</a>
  <ul>
    <li><a href="../../io/Avro.html" class="page">Avro</a></li>
    <li><a href="../../io/Binary.html" class="page">Binary</a></li>
    <li><a href="../../io/BigQuery.html" class="page">BigQuery</a></li>
    <li><a href="../../io/Bigtable.html" class="page">Bigtable</a></li>
    <li><a href="../../io/Cassandra.html" class="page">Cassandra</a></li>
    <li><a href="../../io/Csv.html" class="page">CSV</a></li>
    <li><a href="../../io/Datastore.html" class="page">Datastore</a></li>
    <li><a href="../../io/Grpc.html" class="page">GRPC</a></li>
    <li><a href="../../io/Elasticsearch.html" class="page">Elasticsearch</a></li>
    <li><a href="../../io/Jdbc.html" class="page">JDBC</a></li>
    <li><a href="../../io/Json.html" class="page">Json</a></li>
    <li><a href="../../io/Neo4J.html" class="page">Neo4J</a></li>
    <li><a href="../../io/Object.html" class="page">Object file</a></li>
    <li><a href="../../io/Parquet.html" class="page">Parquet</a></li>
    <li><a href="../../io/Protobuf.html" class="page">Protobuf</a></li>
    <li><a href="../../io/Pubsub.html" class="page">PubSub</a></li>
    <li><a href="../../io/ReadFiles.html" class="page">ReadFiles</a></li>
    <li><a href="../../io/Redis.html" class="page">Redis</a></li>
    <li><a href="../../io/Spanner.html" class="page">Spanner</a></li>
    <li><a href="../../io/Tensorflow.html" class="page">Tensorflow</a></li>
    <li><a href="../../io/Text.html" class="page">Text</a></li>
  </ul></li>
  <li><a href="../../examples.html" class="page">Examples</a></li>
  <li><a href="../../Scio-Unit-Tests.html" class="page">Testing</a></li>
  <li><a href="../../internals/index.html" class="page">Internals</a>
  <ul>
    <li><a href="../../internals/Coders.html" class="page">Coder Typeclass</a></li>
    <li><a href="../../internals/Kryo.html" class="page">Kryo</a></li>
    <li><a href="../../internals/OverrideTypeProvider.html" class="page">OverrideTypeProvider</a></li>
    <li><a href="../../internals/ScioIO.html" class="page">ScioIO</a></li>
  </ul></li>
  <li><a href="../../extras/index.html" class="page">Extras</a>
  <ul>
    <li><a href="../../extras/Algebird.html" class="page">Algebird</a></li>
    <li><a href="../../extras/Annoy.html" class="page">Annoy</a></li>
    <li><a href="../../extras/AsyncDoFn.html" class="page">AsyncDoFn</a></li>
    <li><a href="../../extras/BigQueryAvro.html" class="page">BigQueryAvro</a></li>
    <li><a href="../../extras/DistCache.html" class="page">DistCache</a></li>
    <li><a href="../../extras/Fanout.html" class="page">Fanout</a></li>
    <li><a href="../../extras/HyperLogLog.html" class="page">HyperLogLog</a></li>
    <li><a href="../../extras/MutableScalableBloomFilter.html" class="page">MutableScalableBloomFilter</a></li>
    <li><a href="../../extras/Sorter.html" class="page">Sorter</a></li>
    <li><a href="../../extras/Sort-Merge-Bucket.html" class="page">Sort Merge Bucket</a></li>
    <li><a href="../../extras/Sparkey.html" class="page">Sparkey</a></li>
    <li><a href="../../extras/Scio-REPL.html" class="page">REPL</a></li>
    <li><a href="../../extras/Transforms.html" class="page">Transforms</a></li>
    <li><a href="../../extras/Voyager.html" class="page">Voyager</a></li>
  </ul></li>
  <li><a href="../../dev/index.html" class="page">Development</a>
  <ul>
    <li><a href="../../dev/build.html" class="page">Build</a></li>
    <li><a href="../../dev/Style-Guide.html" class="page">Style Guide</a></li>
    <li><a href="../../dev/How-to-Release.html" class="page">How to Release</a></li>
    <li><a href="../../dev/Design-Philosophy.html" class="page">Design Philosophy</a></li>
  </ul></li>
  <li><a href="../../scaladoc.html" class="page">Scaladoc</a></li>
  <li><a href="../../Scio,-Scalding-and-Spark.html" class="page">Scio, Spark and Scalding</a></li>
  <li><a href="../../Runners.html" class="page">Runners</a></li>
  <li><a href="../../Scio-data-guideline.html" class="page">Data Guidelines</a></li>
  <li><a href="../../releases/index.html" class="page">Releases</a>
  <ul>
    <li><a href="../../releases/Apache-Beam.html" class="page">Apache Beam Compatibility</a></li>
    <li><a href="../../releases/migrations/index.html" class="page">Migration Guides</a></li>
    <li><a href="../../releases/breaking-changes.html" class="page">Breaking Changelog</a></li>
    <li><a href="../../releases/v0.12.0.html" class="page">v0.12.0 Release Blog</a></li>
  </ul></li>
  <li><a href="../../FAQ.html" class="page">FAQ</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#scio-v0-8-0" class="header">Scio v0.8.0</a>
  <ul>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#tl-dr" class="header">TL;DR</a></li>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#new-features" class="header">New features</a></li>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#deprecations-and-breaking-changes" class="header">Deprecations and Breaking changes</a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.14.10-43-57dbbad-20250131T193552Z*
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#scio-v0-8-0" class="header">Scio v0.8.0</a>
  <ul>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#tl-dr" class="header">TL;DR</a></li>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#new-features" class="header">New features</a></li>
    <li><a href="../../releases/migrations/v0.8.0-Migration-Guide.html#deprecations-and-breaking-changes" class="header">Deprecations and Breaking changes</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#scio-v0-8-0" name="scio-v0-8-0" class="anchor"><span class="anchor-link"></span></a>Scio v0.8.0</h1>
<h2><a href="#tl-dr" name="tl-dr" class="anchor"><span class="anchor-link"></span></a>TL;DR</h2>
<ul>
  <li><a href="#beamsql">BeamSQL integration</a></li>
  <li><a href="#bigquery-storage-api">BigQuery Storage api support</a></li>
  <li><a href="#generic-case-class-type-conversion">Generic case class conversion</a></li>
  <li><a href="#scala-concurrent-future-removed-from-scioios">Remove the usage of Future</a></li>
  <li><a href="#bigquery">New BigQuery method signatures</a></li>
  <li><a href="#async-dofns">New async DoFns</a></li>
  <li><a href="#remove-tensorflow-methods-related-to-schema-inference">Remove tensorflow methods related to schema inference</a></li>
  <li><a href="#remove-support-for-lisp-case-cli-arguments">Remove support for lisp-case CLI arguments</a></li>
</ul>
<h2><a href="#new-features" name="new-features" class="anchor"><span class="anchor-link"></span></a>New features</h2>
<h3><a href="#beamsql" name="beamsql" class="anchor"><span class="anchor-link"></span></a>BeamSQL</h3>
<p>Beam SQL integration is added in this release! This integration comes in many flavors, from fluent api to string interpolation with both offering the possibility to typecheck the provided query at compile time.</p>
<p>A simple use case of this api is reflected in the example below. This example uses the fluent api to query the <code>SCollection[User]</code> and extract <code>username</code> and <code>age</code>. <a href="https://spotify.github.io/scio/api/com/spotify/scio/sql/SqlCollection1.html" title="com.spotify.scio.sql.SqlCollection1"><code>query</code></a> return&rsquo;s <a href="https://beam.apache.org/releases/javadoc/2.62.0/?org/apache/beam/sdk/values/Row.html" title="org.apache.beam.sdk.values.Row"><code>Row</code></a> which is <code>Beam</code>&rsquo;s underlying type that contains the values and the <a href="https://beam.apache.org/releases/javadoc/2.62.0/?org/apache/beam/sdk/values/Schema.html" title="org.apache.beam.sdk.values.Schema"><code>Schema</code></a> of the extracted data.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.sql._
import com.spotify.scio.values._
import org.apache.beam.sdk.values.Row

case class User(username: String, email: String, age: Int)

def users: SCollection[User] = ???

def result: SCollection[Row] = users.query(&quot;select username, age from SCOLLECTION&quot;)
</code></pre>
<p>In the following example we go a little bit further. Using <a href="https://spotify.github.io/scio/api/com/spotify/scio/sql/SqlCollection1.html" title="com.spotify.scio.sql.SqlCollection1"><code>queryAs</code></a> we can express the expected return type <code>(String, Int)</code> instead of <a href="https://beam.apache.org/releases/javadoc/2.62.0/?org/apache/beam/sdk/values/Row.html" title="org.apache.beam.sdk.values.Row"><code>Row</code></a>. Query typecheck only happens at runtime</p>
<p>This will fail at runtime if the expected return type doesn&rsquo;t match the inferred schema for the given query.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.sql._
import com.spotify.scio.values._

case class User(username: String, email: String, age: Int)

def users: SCollection[User] = ???

def result: SCollection[(String, Int)] = users.queryAs(&quot;select username, age from SCOLLECTION&quot;)
</code></pre>
<p>String interpolation is another way to express SQL queries. As we can see from the following example it behaves exactly as any other string interpolation with the added expression of the expected return type. As in the previous example the return type is not typechecked at compile time with the inferred query schema. Any mismatch will result in runtime exception.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.sql._
import com.spotify.scio.values._

case class User(username: String, email: String, age: Int)

def users: SCollection[User] = ???

def result: SCollection[(String, Int)] = sql&quot;select username, age from $users&quot;.as[(String, Int)]
</code></pre>
<p>Typecheck at compile time is provided by <a href="https://spotify.github.io/scio/api/com/spotify/scio/sql/SqlInterpolator.html" title="com.spotify.scio.sql.SqlInterpolator"><code>tsql</code></a>. Here&rsquo;s the same example but with this new method:</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.sql._
import com.spotify.scio.values._

case class User(username: String, email: String, age: Int)

def users: SCollection[User] = ???

def result: SCollection[(String, Int)] = tsql&quot;select username, age from $users&quot;.as[(String, Int)]
</code></pre>
<h4><a href="#handling-sql-query-errors" name="handling-sql-query-errors" class="anchor"><span class="anchor-link"></span></a>Handling SQL query Errors</h4>
<p>SQL query errors can happen! They might have syntax errors, wrong fields and even wrong expected types. To help you out, we have some gorgeous error messages for you!</p>
<p>Using the users collection from previous example, here are some error messages you might encounter.</p>
<p>Selecting wrong field from users:</p>
<pre class="prettyprint"><code class="language-diff">- tsql&quot;select username, age from $users&quot;.as[(String, Int)]
+ tsql&quot;select username, foo from $users&quot;.as[(String, Int)]
</code></pre>
<pre class="prettyprint"><code class="language-bash">SqlValidatorException: Column &#39;foo&#39; not found in any table

Query:
select username, foo from SCOLLECTION


schema of SCOLLECTION:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â username                                 â STRING               â NO       â
â email                                    â STRING               â NO       â
â age                                      â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ

Query result schema (inferred) is unknown.
Expected schema:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â _1                                       â STRING               â NO       â
â _2                                       â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ
</code></pre>
<p>Providing a SQL query with syntax error:</p>
<pre class="prettyprint"><code class="language-diff">- tsql&quot;select username, age from $users&quot;.as[(String, Int)]
+ tsql&quot;select username, age fom $users&quot;.as[(String, Int)]
</code></pre>
<pre class="prettyprint"><code class="language-bash">ParseException: Encountered &quot;users&quot; at line 1, column 27.
Was expecting one of:
    &lt;EOF&gt;
    &quot;ORDER&quot; ...
    &quot;LIMIT&quot; ...
    &quot;OFFSET&quot; ...
    &quot;FETCH&quot; ...
    &quot;FROM&quot; ...
    &quot;,&quot; ...
    &quot;UNION&quot; ...
    &quot;INTERSECT&quot; ...
    &quot;EXCEPT&quot; ...
    &quot;MINUS&quot; ...


Query:
select username, age fom  users


schema of users:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â username                                 â STRING               â NO       â
â email                                    â STRING               â NO       â
â age                                      â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ

Query result schema (inferred) is unknown.
Expected schema:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â _1                                       â STRING               â NO       â
â _2                                       â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ
</code></pre>
<p>Return type different from the inferred one:</p>
<pre class="prettyprint"><code class="language-diff">- tsql&quot;select username, age from $users&quot;.as[(String, Int)]
+ tsql&quot;select username, age fom $users&quot;.as[String]
</code></pre>
<pre class="prettyprint"><code class="language-bash">Inferred schema for query is not compatible with the expected schema.

Query:
select username, age from  users


schema of users:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â username                                 â STRING               â NO       â
â email                                    â STRING               â NO       â
â age                                      â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ

Query result schema (inferred):
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â username                                 â STRING               â NO       â
â age                                      â INT32                â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ

Expected schema:
ââââââââââââââââââââââââââââââââââââââââââââ¬âââââââââââââââââââââââ¬âââââââââââ
â NAME                                     â TYPE                 â NULLABLE â
ââââââââââââââââââââââââââââââââââââââââââââ¼âââââââââââââââââââââââ¼âââââââââââ¤
â value                                    â STRING               â NO       â
ââââââââââââââââââââââââââââââââââââââââââââ´âââââââââââââââââââââââ´âââââââââââ
</code></pre>
<h3><a href="#bigquery-storage-api" name="bigquery-storage-api" class="anchor"><span class="anchor-link"></span></a>BigQuery Storage API</h3>
<p>BigQuery Storage API provides fast access to BigQuery managed storage by using an rpc-based protocol.</p>
<p>If you already use BigQuery, the BigQuery Storage api that we provide will look very familiar as it provides the standard and the type safe api. Switching to this new strategy should be very straightforward.</p>
<p>Using the type safe api is almost the same as the previous provided strategies. We just need to use <a href="https://spotify.github.io/scio/api/com/spotify/scio/bigquery/types/BigQueryType$$fromStorage.html" title="com.spotify.scio.bigquery.types.BigQueryType.fromStorage"><code>@BigQueryType.fromStorage</code></a>. The example below retrieves all columns from a given table.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.bigquery._

@BigQueryType.fromStorage(&quot;data-integration-test:storage.nested&quot;)
class Example
</code></pre>
<p>However if you don&rsquo;t want to pull everything, you can always specify which fields you want and even set some filtering. Note that the field names in <code>selectedFields</code> must appear in the same order as the columns appear in the table.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio.bigquery._

@BigQueryType.fromStorage(
    &quot;data-integration-test:storage.%s&quot;,
    List(&quot;nested&quot;),
    selectedFields = List(&quot;required&quot;, &quot;optional.int&quot;),
    rowRestriction = &quot;required.int &lt; 5&quot;
)
class Example
</code></pre>
<p>Using the above annotated classes can be done through the following methods.</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio._
import com.spotify.scio.bigquery._
import com.spotify.scio.values._

def sc: ScioContext = ???

def below: SCollection[Example] = sc.typedBigQuery[Example]()

// or

def above: SCollection[Example] = sc.typedBigQueryStorage[Example](rowRestriction = &quot;required.int &gt; 5&quot;)

</code></pre>
<p>When not using the type safe api you can always read as:</p>
<pre class="prettyprint"><code class="language-scala">import com.spotify.scio._
import com.spotify.scio.values._
import com.spotify.scio.bigquery._

def sc: ScioContext = ???

def result: SCollection[TableRow] = sc.bigQueryStorage(
    Table.Spec(&quot;apache-beam-testing:samples.weather_stations&quot;),
    selectedFields = List(&quot;tornado&quot;, &quot;month&quot;),
    rowRestriction = &quot;tornado = true&quot;
  )
</code></pre>
<h3><a href="#generic-case-class-type-conversion" name="generic-case-class-type-conversion" class="anchor"><span class="anchor-link"></span></a>Generic case class type conversion</h3>
<p>With the introduction of automatic schema derivation for data types it becomes really easy to convert between &ldquo;compatible&rdquo; generic <code>case class</code>es.</p>
<pre class="prettyprint"><code class="language-scala mdoc:reset">import com.spotify.scio.values._
import com.spotify.scio.schemas._

case class FromExample(i: Int, s: String)

case class ToExample(s: String)

def examples: SCollection[FromExample] = ???
</code></pre>
<p>To convert <code>FromExample</code> <code>=&gt;</code> <code>ToExample</code> we can use two methods <code>unsafe</code> and <code>safe</code>. The main difference between them is when the conversion compatibility check happens. With <code>unsafe</code> it happens at runtime while with <code>safe</code> it&rsquo;s at compile time.</p>
<pre class="prettyprint"><code class="language-scala">def unsafe: SCollection[ToExample] = examples.to[ToExample](To.unsafe)

def safe: SCollection[ToExample] = examples.to[ToExample](To.safe)
</code></pre>
<h2><a href="#deprecations-and-breaking-changes" name="deprecations-and-breaking-changes" class="anchor"><span class="anchor-link"></span></a>Deprecations and Breaking changes</h2>
<h3><a href="#scala-concurrent-future-removed-from-scioios" name="scala-concurrent-future-removed-from-scioios" class="anchor"><span class="anchor-link"></span></a>scala.concurrent.Future removed from <code>ScioIO</code>s</h3>
<p>The removal of <a href="http://www.scala-lang.org/api/2.13.16/scala/concurrent/Future.html" title="scala.concurrent.Future"><code>Future</code></a> led to some semantic and behaviour changes.</p>
<p><code>ScioIO</code>s no longer return <a href="http://www.scala-lang.org/api/2.13.16/scala/concurrent/Future.html" title="scala.concurrent.Future"><code>Future</code></a></p>
<pre class="prettyprint"><code class="language-diff">trait ScioIO[T] {
  ....
- protected def write(data: SCollection[T], params: WriteP): Future[Tap[tapT.T]]
+ protected def write(data: SCollection[T], params: WriteP): Tap[tapT.T]
  ...
}
</code></pre>
<p><code>SCollection#write</code> returns <code>ClosedTap[T]</code></p>
<pre class="prettyprint"><code class="language-diff">sealed trait SCollection[T] extends PCollectionWrapper[T] {
    ...
- def write(io: ScioIO[T])(params: io.WriteP)(implicit coder: Coder[T]): Future[Tap[io.tapT.T]]
+ def write(io: ScioIO[T])(params: io.WriteP)(implicit coder: Coder[T]): ClosedTap[io.tapT.T]
    ...
}
</code></pre>
<p><a href="https://spotify.github.io/scio/api/com/spotify/scio/io/ClosedTap.html" title="com.spotify.scio.io.ClosedTap"><code>ClosedTap[T]</code></a> encapsulates the IO <a href="https://spotify.github.io/scio/api/com/spotify/scio/io/Tap.html" title="com.spotify.scio.io.Tap"><code>Tap[T]</code></a> and it&rsquo;s only possible to read from it once the pipeline execution is done. This is demonstrated in the following example:</p>
<pre class="prettyprint"><code class="language-scala mdoc:reset">import com.spotify.scio._
import com.spotify.scio.io._

def sc: ScioContext = ???
def closedTap: ClosedTap[String] =
     sc
      .parallelize(1 to 100)
      .sum
      .map(_.toString)
      .saveAsTextFile(&quot;...&quot;)

def scioResult: ScioResult = sc.run().waitUntilDone()

// open tap for read
def openedTap: Tap[String] = scioResult.tap(closedTap)
</code></pre>
<h3><a href="#sciocontext" name="sciocontext" class="anchor"><span class="anchor-link"></span></a>ScioContext</h3>
<p><a href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#close" title="com.spotify.scio.ScioContext"><code>ScioContext#close</code></a> changed it&rsquo;s return type to <a href="https://spotify.github.io/scio/api/com/spotify/scio/ScioExecutionContext.html" title="com.spotify.scio.ScioExecutionContext"><code>ScioExecutionContext</code></a>.</p>
<pre class="prettyprint"><code class="language-diff">- def close(): ScioResult
+ def close(): ScioExecutionContext
</code></pre>
<p><a href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#close" title="com.spotify.scio.ScioContext"><code>ScioContext#close</code></a> is also being deprecated in favor of <a href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#run" title="com.spotify.scio.ScioContext"><code>ScioContext#run</code></a>. With this change, <code>--blocking</code> flag is also deprecated.</p>
<p>To achieve the same behaviour with the new <a href="https://spotify.github.io/scio/api/com/spotify/scio/ScioContext.html#run" title="com.spotify.scio.ScioContext"><code>ScioContext#run</code></a> you can do the following:</p>
<pre class="prettyprint"><code class="language-scala mdoc:reset">import com.spotify.scio._
import scala.concurrent.duration._

def scioResult(sc: ScioContext): ScioResult = sc.run().waitUntilDone(Duration.Inf)
</code></pre>
<h3><a href="#remove-tensorflow-methods-related-to-schema-inference" name="remove-tensorflow-methods-related-to-schema-inference" class="anchor"><span class="anchor-link"></span></a>Remove tensorflow methods related to schema inference</h3>
<p>In scio 0.7.0 <code>scio-tensorflow</code> saw some of its operations being deprecated. They are no longer available in this version and we recommend users to use TensorFlow Data Validation instead.</p>
<p>Removed operations:</p>
<ul>
  <li><code>saveExampleMetadata</code></li>
  <li><code>saveAsTfExampleFileWithSchema</code></li>
</ul>
<h3><a href="#bigquery" name="bigquery" class="anchor"><span class="anchor-link"></span></a>BigQuery</h3>
<p>If you are using <code>BigQuery</code> you will see some <code>@deprecated</code> warnings:</p>
<pre class="prettyprint"><code class="language-scala">// method bigQueryTable in class ScioContextOps is deprecated (since Scio 0.8):
// this method will be removed; use bigQueryTable(Table.Spec(table)) instead
</code></pre>
<p>All <code>BigQuery</code> io operations now support new data types <a href="https://spotify.github.io/scio/api/com/spotify/scio/bigquery/Table$.html" title="com.spotify.scio.bigquery.Table"><code>Table</code></a> to reference a specific table and <a href="https://spotify.github.io/scio/api/com/spotify/scio/bigquery/Query$.html" title="com.spotify.scio.bigquery.Query"><code>Query</code></a> to a query. Every method that uses <code>tableSpec: String</code>, <code>tableReference: TableReference</code>, or <code>query: String</code> has been deprecated.</p>
<pre class="prettyprint"><code class="language-diff">- def bigQueryTable(tableSpec: String): SCollection[TableRow]
- def bigQueryTable(tableReference: TableReference): SCollection[TableRow]
- def bigQuerySelect(query: String): SCollection[TableRow]

+ def bigQueryTable(table: Table): SCollection[TableRow]
+ def bigQuerySelect(query: Query): SCollection[TableRow]
</code></pre>
<p>The new <code>Table</code> type can be created according to the following examples:</p>
<pre class="prettyprint"><code class="language-scala">def tableSpecString: String = ???

def table: Table = Table.Spec(tableSpecString)
</code></pre>
<p>or:</p>
<pre class="prettyprint"><code class="language-scala">def tableReference: TableReference = ???

def table: Table = Table.Ref(tableReference)
</code></pre>
<p>The advantage of this over the previous usage of <code>String</code> or <code>TableReference</code> is that now we are able to safely disambiguate between table spec and table reference.</p>
<h3><a href="#async-dofns" name="async-dofns" class="anchor"><span class="anchor-link"></span></a>Async <code>DoFn</code>s</h3>
<p>Async <code>DoFn</code>s were refactored.</p>
<p><code>AsyncLookupDoFn</code> was renamed to <a href="https://spotify.github.io/scio/api/com/spotify/scio/transforms/BaseAsyncLookupDoFn.html" title="com.spotify.scio.transforms.BaseAsyncLookupDoFn"><code>BaseAsyncLookupDoFn</code></a> and we now have better support for <code>Guava</code>, <code>Java 8</code> and scala <code>Future</code> lookup DoFn&rsquo;s through the following implementations <a href="https://spotify.github.io/scio/api/com/spotify/scio/transforms/GuavaAsyncLookupDoFn.html" title="com.spotify.scio.transforms.GuavaAsyncLookupDoFn"><code>GuavaAsyncLookupDoFn</code></a>, <a href="https://spotify.github.io/scio/api/com/spotify/scio/transforms/JavaAsyncLookupDoFn.html" title="com.spotify.scio.transforms.JavaAsyncLookupDoFn"><code>JavaAsyncLookupDoFn</code></a> and <a href="https://spotify.github.io/scio/api/com/spotify/scio/transforms/ScalaAsyncLookupDoFn.html" title="com.spotify.scio.transforms.ScalaAsyncLookupDoFn"><code>ScalaAsyncLookupDoFn</code></a>.</p>
<h3><a href="#remove-support-for-lisp-case-cli-arguments" name="remove-support-for-lisp-case-cli-arguments" class="anchor"><span class="anchor-link"></span></a>Remove support for lisp-case CLI arguments</h3>
<p>In order to be consistent with Beam&rsquo;s way of passing arguments into the application and construct <a href="https://beam.apache.org/releases/javadoc/2.62.0/?org/apache/beam/sdk/options/PipelineOptions.html" title="org.apache.beam.sdk.options.PipelineOptions"><code>PipelineOptions</code></a>, we decided to drop support for <code>lisp-case</code> arguments.</p>
<p>What this means is that if you were passing arguments like <code>--foo-bar</code> now you need to pass it as <code>--fooBar</code>.</p>
</div>
<div>
<a href="https://github.com/spotify/scio/tree/master/site/src/main/paradox/releases/migrations/v0.8.0-Migration-Guide.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.14.10-43-57dbbad-20250131T193552Z*
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../releases/migrations/v0.7.0-Migration-Guide.html" title="Scio v0.7.0" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Scio v0.7.0
</span>
</div>
</a>
<a href="../../releases/migrations/v0.9.0-Migration-Guide.html" title="Scio v0.9.0" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Scio v0.9.0
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright (C) 2025 Spotify AB
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://sbt.github.io/sbt-paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/spotify" class="md-footer-social__link fa fa-github"></a><a href="https://twitter.com/spotifyeng" class="md-footer-social__link fa fa-twitter"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.583bbe55.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
